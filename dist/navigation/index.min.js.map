{"version":3,"sources":["webpack://wc.[modulename]/webpack/bootstrap","webpack://wc.[modulename]/./packages/navigation/src/filters.js","webpack://wc.[modulename]/./packages/navigation/src/history.js","webpack://wc.[modulename]/./packages/navigation/src/index.js","webpack://wc.[modulename]/external {\"this\":[\"wp\",\"hooks\"]}","webpack://wc.[modulename]/external {\"this\":[\"wp\",\"url\"]}","webpack://wc.[modulename]/external \"lodash\""],"names":["allFilters","filters","f","omit","subFilters","flattenFilters","compact","filter","config","match","find","query","getUrlKey","rule","value","key","defaultOption","option","console","get","previousFilters","getActiveFiltersFromQuery","previousData","data","nextData","Array","path","document","browserHistory","createBrowserHistory","basename","_history","location","parse","pathname","createHref","args","push","replace","go","goBack","goForward","block","listen","listener","getPath","getHistory","getPersistedQuery","navUtils","params","applyFilters","pick","queryString","uniq","parseInt","search","searchWord","currentQuery","getQuery","page","addQueryArgs","updateQueryString","orderby","order","dir","newPath","getNewPath"],"mappings":"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","file":"navigation/index.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/navigation/build-module/index.js\");\n","/**\n * External dependencies\n */\nimport { compact, find, get, omit } from 'lodash';\n\n/**\n * Collapse an array of filter values with subFilters into a 1-dimensional array.\n *\n * @param {Array} filters Set of filters with possible subfilters.\n * @return {Array} Flattened array of all filters.\n */\nexport function flattenFilters( filters ) {\n\tconst allFilters = [];\n\tfilters.forEach( ( f ) => {\n\t\tif ( ! f.subFilters ) {\n\t\t\tallFilters.push( f );\n\t\t} else {\n\t\t\tallFilters.push( omit( f, 'subFilters' ) );\n\t\t\tconst subFilters = flattenFilters( f.subFilters );\n\t\t\tallFilters.push( ...subFilters );\n\t\t}\n\t} );\n\treturn allFilters;\n}\n\n/**\n * Describe activeFilter object.\n *\n * @typedef {Object} activeFilter\n * @property {string} key - filter key.\n * @property {string} [rule] - a modifying rule for a filter, eg 'includes' or 'is_not'.\n * @property {string} value - filter value(s).\n */\n\n/**\n * Given a query object, return an array of activeFilters, if any.\n *\n * @param {Object} query - query oject\n * @param {Object} config - config object\n * @return {activeFilters[]} - array of activeFilters\n */\nexport function getActiveFiltersFromQuery( query, config ) {\n\treturn compact(\n\t\tObject.keys( config ).map( ( configKey ) => {\n\t\t\tconst filter = config[ configKey ];\n\t\t\tif ( filter.rules ) {\n\t\t\t\tconst match = find( filter.rules, ( rule ) => {\n\t\t\t\t\treturn query.hasOwnProperty(\n\t\t\t\t\t\tgetUrlKey( configKey, rule.value )\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\tif ( match ) {\n\t\t\t\t\tconst value = query[ getUrlKey( configKey, match.value ) ];\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkey: configKey,\n\t\t\t\t\t\trule: match.value,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif ( query[ configKey ] ) {\n\t\t\t\treturn {\n\t\t\t\t\tkey: configKey,\n\t\t\t\t\tvalue: query[ configKey ],\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn null;\n\t\t} )\n\t);\n}\n\n/**\n * Get the default option's value from the configuration object for a given filter. The first\n * option is used as default if no `defaultOption` is provided.\n *\n * @param {Object} config - a filter config object.\n * @param {Array} options - select options.\n * @return {string|undefined}  - the value of the default option.\n */\nexport function getDefaultOptionValue( config, options ) {\n\tconst { defaultOption } = config.input;\n\tif ( config.input.defaultOption ) {\n\t\tconst option = find( options, { value: defaultOption } );\n\t\tif ( ! option ) {\n\t\t\t/* eslint-disable no-console */\n\t\t\tconsole.warn(\n\t\t\t\t`invalid defaultOption ${ defaultOption } supplied to ${ config.labels.add }`\n\t\t\t);\n\t\t\t/* eslint-enable */\n\t\t\treturn undefined;\n\t\t}\n\t\treturn option.value;\n\t}\n\treturn get( options, [ 0, 'value' ] );\n}\n\n/**\n * @typedef {Object} activeFilters\n */\n\n/**\n * Given activeFilters, create a new query object to update the url. Use previousFilters to\n * Remove unused params.\n *\n * @param {activeFilters[]} activeFilters - activeFilters shown in the UI\n * @param {Object} query - the current url query object\n * @param {Object} config - config object\n * @return {Object} - query object representing the new parameters\n */\nexport function getQueryFromActiveFilters( activeFilters, query, config ) {\n\tconst previousFilters = getActiveFiltersFromQuery( query, config );\n\tconst previousData = previousFilters.reduce( ( data, filter ) => {\n\t\tdata[ getUrlKey( filter.key, filter.rule ) ] = undefined;\n\t\treturn data;\n\t}, {} );\n\tconst nextData = activeFilters.reduce( ( data, filter ) => {\n\t\tif (\n\t\t\tfilter.rule === 'between' &&\n\t\t\t( ! Array.isArray( filter.value ) ||\n\t\t\t\tfilter.value.some( ( value ) => ! value ) )\n\t\t) {\n\t\t\treturn data;\n\t\t}\n\n\t\tif ( filter.value ) {\n\t\t\tdata[ getUrlKey( filter.key, filter.rule ) ] = filter.value;\n\t\t}\n\t\treturn data;\n\t}, {} );\n\n\treturn { ...previousData, ...nextData };\n}\n\n/**\n * Get the url query key from the filter key and rule.\n *\n * @param {string} key - filter key.\n * @param {string} rule - filter rule.\n * @return {string} - url query key.\n */\nexport function getUrlKey( key, rule ) {\n\tif ( rule && rule.length ) {\n\t\treturn `${ key }_${ rule }`;\n\t}\n\treturn key;\n}\n","/**\n * External dependencies\n */\nimport { createBrowserHistory } from 'history';\nimport { parse } from 'qs';\n\n// See https://github.com/ReactTraining/react-router/blob/master/FAQ.md#how-do-i-access-the-history-object-outside-of-components\n\nlet _history;\n\n/**\n * Recreate `history` to coerce React Router into accepting path arguments found in query\n * parameter `path`, allowing a url hash to be avoided. Since hash portions of the url are\n * not sent server side, full route information can be detected by the server.\n *\n * `<Router />` and `<Switch />` components use `history.location()` to match a url with a route.\n * Since they don't parse query arguments, recreate `get location` to return a `pathname` with the\n * query path argument's value.\n *\n * @return {Object} React-router history object with `get location` modified.\n */\nfunction getHistory() {\n\tif ( ! _history ) {\n\t\tconst path = document.location.pathname;\n\t\tconst browserHistory = createBrowserHistory( {\n\t\t\tbasename: path.substring( 0, path.lastIndexOf( '/' ) ),\n\t\t} );\n\t\t_history = {\n\t\t\tget length() {\n\t\t\t\treturn browserHistory.length;\n\t\t\t},\n\t\t\tget action() {\n\t\t\t\treturn browserHistory.action;\n\t\t\t},\n\t\t\tget location() {\n\t\t\t\tconst { location } = browserHistory;\n\t\t\t\tconst query = parse( location.search.substring( 1 ) );\n\t\t\t\tconst pathname = query.path || '/';\n\n\t\t\t\treturn {\n\t\t\t\t\t...location,\n\t\t\t\t\tpathname,\n\t\t\t\t};\n\t\t\t},\n\t\t\tcreateHref: ( ...args ) =>\n\t\t\t\tbrowserHistory.createHref.apply( browserHistory, args ),\n\t\t\tpush: ( ...args ) =>\n\t\t\t\tbrowserHistory.push.apply( browserHistory, args ),\n\t\t\treplace: ( ...args ) =>\n\t\t\t\tbrowserHistory.replace.apply( browserHistory, args ),\n\t\t\tgo: ( ...args ) => browserHistory.go.apply( browserHistory, args ),\n\t\t\tgoBack: ( ...args ) =>\n\t\t\t\tbrowserHistory.goBack.apply( browserHistory, args ),\n\t\t\tgoForward: ( ...args ) =>\n\t\t\t\tbrowserHistory.goForward.apply( browserHistory, args ),\n\t\t\tblock: ( ...args ) =>\n\t\t\t\tbrowserHistory.block.apply( browserHistory, args ),\n\t\t\tlisten( listener ) {\n\t\t\t\treturn browserHistory.listen( () => {\n\t\t\t\t\tlistener( this.location, this.action );\n\t\t\t\t} );\n\t\t\t},\n\t\t};\n\t}\n\treturn _history;\n}\n\nexport { getHistory };\n","/**\n * External dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\nimport { parse } from 'qs';\nimport { pick, uniq } from 'lodash';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { getHistory } from './history';\n\n// Expose history so all uses get the same history object.\nexport { getHistory };\n\n// Export all filter utilities\nexport * from './filters';\n\n/**\n * Internal dependencies\n */\n// Import the module into itself. Functions consumed from this import can be mocked in tests.\nimport * as navUtils from './index';\n\n/**\n * Get the current path from history.\n *\n * @return {string}  Current path.\n */\nexport const getPath = () => getHistory().location.pathname;\n\n/**\n * Gets query parameters that should persist between screens or updates\n * to reports, such as filtering.\n *\n * @param {Object} query Query containing the parameters.\n * @return {Object} Object containing the persisted queries.\n */\nexport const getPersistedQuery = ( query = navUtils.getQuery() ) => {\n\tconst params = applyFilters( 'woocommerce_admin_persisted_queries', [\n\t\t'period',\n\t\t'compare',\n\t\t'before',\n\t\t'after',\n\t\t'interval',\n\t\t'type',\n\t] );\n\treturn pick( query, params );\n};\n\n/**\n * Get an array of IDs from a comma-separated query parameter.\n *\n * @param {string} queryString string value extracted from URL.\n * @return {Array} List of IDs converted to numbers.\n */\nexport function getIdsFromQuery( queryString = '' ) {\n\treturn uniq(\n\t\tqueryString\n\t\t\t.split( ',' )\n\t\t\t.map( ( id ) => parseInt( id, 10 ) )\n\t\t\t.filter( Boolean )\n\t);\n}\n\n/**\n * Get an array of searched words given a query.\n *\n * @param {Object} query Query object.\n * @return {Array} List of search words.\n */\nexport function getSearchWords( query = navUtils.getQuery() ) {\n\tif ( typeof query !== 'object' ) {\n\t\tthrow new Error(\n\t\t\t'Invalid parameter passed to getSearchWords, it expects an object or no parameters.'\n\t\t);\n\t}\n\tconst { search } = query;\n\tif ( ! search ) {\n\t\treturn [];\n\t}\n\tif ( typeof search !== 'string' ) {\n\t\tthrow new Error(\n\t\t\t\"Invalid 'search' type. getSearchWords expects query's 'search' property to be a string.\"\n\t\t);\n\t}\n\treturn search\n\t\t.split( ',' )\n\t\t.map( ( searchWord ) => searchWord.replace( '%2C', ',' ) );\n}\n\n/**\n * Return a URL with set query parameters.\n *\n * @param {Object} query object of params to be updated.\n * @param {string} path Relative path (defaults to current path).\n * @param {Object} currentQuery object of current query params (defaults to current querystring).\n * @return {string}  Updated URL merging query params into existing params.\n */\nexport function getNewPath(\n\tquery,\n\tpath = getPath(),\n\tcurrentQuery = getQuery()\n) {\n\tconst args = { page: 'wc-admin', ...currentQuery, ...query };\n\tif ( path !== '/' ) {\n\t\targs.path = path;\n\t}\n\treturn addQueryArgs( 'admin.php', args );\n}\n\n/**\n * Get the current query string, parsed into an object, from history.\n *\n * @return {Object}  Current query object, defaults to empty object.\n */\nexport function getQuery() {\n\tconst search = getHistory().location.search;\n\tif ( search.length ) {\n\t\treturn parse( search.substring( 1 ) ) || {};\n\t}\n\treturn {};\n}\n\n/**\n * This function returns an event handler for the given `param`\n *\n * @param {string} param The parameter in the querystring which should be updated (ex `page`, `per_page`)\n * @param {string} path Relative path (defaults to current path).\n * @param {string} query object of current query params (defaults to current querystring).\n * @return {Function} A callback which will update `param` to the passed value when called.\n */\nexport function onQueryChange( param, path = getPath(), query = getQuery() ) {\n\tswitch ( param ) {\n\t\tcase 'sort':\n\t\t\treturn ( key, dir ) =>\n\t\t\t\tupdateQueryString( { orderby: key, order: dir }, path, query );\n\t\tcase 'compare':\n\t\t\treturn ( key, queryParam, ids ) =>\n\t\t\t\tupdateQueryString(\n\t\t\t\t\t{\n\t\t\t\t\t\t[ queryParam ]: `compare-${ key }`,\n\t\t\t\t\t\t[ key ]: ids,\n\t\t\t\t\t\tsearch: undefined,\n\t\t\t\t\t},\n\t\t\t\t\tpath,\n\t\t\t\t\tquery\n\t\t\t\t);\n\t\tdefault:\n\t\t\treturn ( value ) =>\n\t\t\t\tupdateQueryString( { [ param ]: value }, path, query );\n\t}\n}\n\n/**\n * Updates the query parameters of the current page.\n *\n * @param {Object} query object of params to be updated.\n * @param {string} path Relative path (defaults to current path).\n * @param {Object} currentQuery object of current query params (defaults to current querystring).\n */\nexport function updateQueryString(\n\tquery,\n\tpath = getPath(),\n\tcurrentQuery = getQuery()\n) {\n\tconst newPath = getNewPath( query, path, currentQuery );\n\tgetHistory().push( newPath );\n}\n","(function() { module.exports = this[\"wp\"][\"hooks\"]; }());","(function() { module.exports = this[\"wp\"][\"url\"]; }());","(function() { module.exports = this[\"lodash\"]; }());"],"sourceRoot":""}