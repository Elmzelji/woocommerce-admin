{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/index.js","webpack://wc.[modulename]/./client/dashboard/utils.js"],"names":["CustomizableDashboard","lazy","ProfileWizard","Dashboard","props","path","profileItems","query","isOnboardingEnabled","completed","window","Component","compose","withSelect","select","getProfileItems","getCountryCode","countryState","split","getCurrencyRegion","region","euCountries","without","getSetting","includes","getProductIdsForCart","includeInstalledItems","onboarding","productTypes","productIds","plugins","product_types","forEach","productType","product","installedPlugins","slug","push","theme","themes","find","themeData","id","getPriceValue","price","is_installed","string","Number","decodeEntities","replace"],"mappings":"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","file":"chunks/dashboard.90c9cae3b67f2cd6896f.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Component, Suspense, lazy } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport withSelect from 'wc-api/with-select';\nimport { isOnboardingEnabled } from 'dashboard/utils';\nimport { Spinner } from '@woocommerce/components';\n\nconst CustomizableDashboard = lazy( () =>\n\timport( /* webpackChunkName: \"customizable-dashboard\" */ './customizable' )\n);\n\nconst ProfileWizard = lazy( () =>\n\timport( /* webpackChunkName: \"profile-wizard\" */ '../profile-wizard' )\n);\n\nclass Dashboard extends Component {\n\trender() {\n\t\tconst { path, profileItems, query } = this.props;\n\n\t\tif (\n\t\t\tisOnboardingEnabled() &&\n\t\t\t! profileItems.completed &&\n\t\t\t! window.wcAdminFeatures.homepage\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<Suspense fallback={ <Spinner /> }>\n\t\t\t\t\t<ProfileWizard query={ query } />\n\t\t\t\t</Suspense>\n\t\t\t);\n\t\t}\n\n\t\tif ( window.wcAdminFeatures[ 'analytics-dashboard/customizable' ] ) {\n\t\t\treturn (\n\t\t\t\t<Suspense fallback={ <Spinner /> }>\n\t\t\t\t\t<CustomizableDashboard query={ query } path={ path } />\n\t\t\t\t</Suspense>\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tif ( ! isOnboardingEnabled() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { getProfileItems } = select( 'wc-api' );\n\t\tconst profileItems = getProfileItems();\n\n\t\treturn { profileItems };\n\t} )\n)( Dashboard );\n","/**\n * External dependencies\n */\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { without } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Gets the country code from a country:state value string.\n *\n * @param {string} countryState Country state string, e.g. US:GA.\n * @return {string} Country string.\n */\n\nexport function getCountryCode( countryState ) {\n\tif ( ! countryState ) {\n\t\treturn null;\n\t}\n\n\treturn countryState.split( ':' )[ 0 ];\n}\n\nexport function getCurrencyRegion( countryState ) {\n\tlet region = getCountryCode( countryState );\n\tconst euCountries = without(\n\t\tgetSetting( 'onboarding', { euCountries: [] } ).euCountries,\n\t\t'GB'\n\t);\n\tif ( euCountries.includes( region ) ) {\n\t\tregion = 'EU';\n\t}\n\n\treturn region;\n}\n\n/**\n * Gets the product IDs for items based on the product types and theme selected in the onboarding profiler.\n *\n * @param {Object} profileItems Onboarding profile.\n * @param {boolean} includeInstalledItems Include installed items in returned product IDs.\n * @return {Array} Product Ids.\n */\nexport function getProductIdsForCart(\n\tprofileItems,\n\tincludeInstalledItems = false\n) {\n\tconst onboarding = getSetting( 'onboarding', {} );\n\n\t// The population of onboarding.productTypes only happens if the task list should be shown\n\t// so bail early if it isn't present.\n\tif ( ! onboarding.productTypes ) {\n\t\treturn productIds;\n\t}\n\n\tconst productIds = [];\n\tconst plugins = getSetting( 'plugins', {} );\n\tconst productTypes = profileItems.product_types || [];\n\n\tproductTypes.forEach( ( productType ) => {\n\t\tif (\n\t\t\tonboarding.productTypes[ productType ] &&\n\t\t\tonboarding.productTypes[ productType ].product &&\n\t\t\t( includeInstalledItems ||\n\t\t\t\t! plugins.installedPlugins.includes(\n\t\t\t\t\tonboarding.productTypes[ productType ].slug\n\t\t\t\t) )\n\t\t) {\n\t\t\tproductIds.push( onboarding.productTypes[ productType ].product );\n\t\t}\n\t} );\n\n\tconst theme = onboarding.themes.find(\n\t\t( themeData ) => themeData.slug === profileItems.theme\n\t);\n\n\tif (\n\t\ttheme &&\n\t\ttheme.id &&\n\t\tgetPriceValue( theme.price ) > 0 &&\n\t\t( includeInstalledItems || ! theme.is_installed )\n\t) {\n\t\tproductIds.push( theme.id );\n\t}\n\n\treturn productIds;\n}\n\n/**\n * Get the value of a price from a string, removing any non-numeric characters.\n *\n * @param {string} string Price string.\n * @return {number} Number value.\n */\nexport function getPriceValue( string ) {\n\treturn Number( decodeEntities( string ).replace( /[^0-9.-]+/g, '' ) );\n}\n\n/**\n * Returns if the onboarding feature of WooCommerce Admin should be enabled.\n *\n * While we preform an a/b test of onboarding, the feature will be enabled within the plugin build,\n * but only if the user recieved the test/opted in.\n *\n * @return {boolean} True if the onboarding is enabled.\n */\nexport function isOnboardingEnabled() {\n\tif ( ! window.wcAdminFeatures.onboarding ) {\n\t\treturn false;\n\t}\n\n\treturn getSetting( 'onboardingEnabled', false );\n}\n"],"sourceRoot":""}