{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/action.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/card.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/index.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/placeholder.js","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["InboxNoteAction","props","state","inAction","handleActionClick","bind","event","action","actionCallback","noteId","triggerNoteAction","removeAllNotes","removeNote","onClick","href","target","length","startsWith","adminUrl","preventDefault","window","open","setState","id","dismiss","label","url","undefined","Component","propTypes","PropTypes","number","string","bool","func","shape","isRequired","primary","compose","withDispatch","dispatch","InboxNoteCard","actioned_text","clickedActionText","onVisible","hasBeenSeen","isDismissModalOpen","dismissType","openDismissModal","closeDismissModal","bodyNotificationRef","createRef","screen","getScreenName","current","addEventListener","handleBodyClick","removeEventListener","innerLink","note","recordEvent","note_name","name","note_title","title","note_content_inner_link","isVisible","note_content","content","note_type","type","onToggle","noteNameDismissConfirmation","noteNameDismissAll","note_name_dismiss_all","note_name_dismiss_confirmation","onClose","dropdownClasses","relatedTarget","document","activeElement","isClickOutsideDropdown","some","className","includes","handleBlur","__","noArrow","getDismissConfirmationButton","noteActions","actions","map","index","onActionClicked","lastRead","dateCreated","date_created","dateCreatedGmt","date_created_gmt","image","isDeleted","is_deleted","layout","status","unread","Date","getTime","date","hasImage","cardClassName","classnames","moment","utc","fromNow","sanitizeHTML","renderActions","renderDismissButton","renderDismissConfirmationModal","arrayOf","renderEmptyCard","renderNotes","hasNotes","isDismissUndoRequesting","isDismissAllUndoRequesting","notes","notesArray","Object","keys","key","InboxPanel","isError","isPanelEmpty","isRequesting","isUndoRequesting","useUserPreferences","updateUserPreferences","userPrefs","activity_panel_inbox_last_read","useEffect","mountTime","now","userDataFields","actionLabel","location","reload","hasValidNotes","isActivityHeaderVisible","getUnreadNotesCount","withSelect","select","getNotes","getNotesError","isGetNotesRequesting","getUndoDismissRequesting","inboxQuery","page","per_page","QUERY_DEFAULTS","pageSize","noteTypes","orderby","order","_fields","Boolean","InboxNotePlaceholder","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/activity-panels-inbox~homescreen.b16e72d3e5750bafa54c.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\n\nclass InboxNoteAction extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tinAction: false,\n\t\t};\n\n\t\tthis.handleActionClick = this.handleActionClick.bind( this );\n\t}\n\n\thandleActionClick( event ) {\n\t\tconst {\n\t\t\taction,\n\t\t\tactionCallback,\n\t\t\tnoteId,\n\t\t\ttriggerNoteAction,\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\tonClick,\n\t\t} = this.props;\n\t\tconst href = event.target.href || '';\n\t\tlet inAction = true;\n\n\t\tif ( href.length && ! href.startsWith( adminUrl ) ) {\n\t\t\tevent.preventDefault();\n\t\t\tinAction = false; // link buttons shouldn't be \"busy\".\n\t\t\twindow.open( href, '_blank' );\n\t\t}\n\n\t\tif ( ! action ) {\n\t\t\tif ( noteId ) {\n\t\t\t\tremoveNote( noteId );\n\t\t\t} else {\n\t\t\t\tremoveAllNotes();\n\t\t\t}\n\n\t\t\tactionCallback( true );\n\t\t} else {\n\t\t\tthis.setState( { inAction }, () => {\n\t\t\t\ttriggerNoteAction( noteId, action.id );\n\n\t\t\t\tif ( !! onClick ) {\n\t\t\t\t\tonClick();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { action, dismiss, label } = this.props;\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tisSecondary\n\t\t\t\tisBusy={ this.state.inAction }\n\t\t\t\tdisabled={ this.state.inAction }\n\t\t\t\thref={\n\t\t\t\t\taction && action.url && action.url.length\n\t\t\t\t\t\t? action.url\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tonClick={ this.handleActionClick }\n\t\t\t>\n\t\t\t\t{ dismiss ? label : action.label }\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nInboxNoteAction.propTypes = {\n\tnoteId: PropTypes.number,\n\tlabel: PropTypes.string,\n\tdismiss: PropTypes.bool,\n\tactionCallback: PropTypes.func,\n\taction: PropTypes.shape( {\n\t\tid: PropTypes.number.isRequired,\n\t\turl: PropTypes.string,\n\t\tlabel: PropTypes.string.isRequired,\n\t\tprimary: PropTypes.bool.isRequired,\n\t} ),\n\tonClick: PropTypes.func,\n};\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { removeAllNotes, removeNote, triggerNoteAction } = dispatch(\n\t\t\t'wc-api'\n\t\t);\n\n\t\treturn {\n\t\t\tremoveAllNotes,\n\t\t\tremoveNote,\n\t\t\ttriggerNoteAction,\n\t\t};\n\t} )\n)( InboxNoteAction );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef, Fragment } from '@wordpress/element';\nimport { Button, Dropdown, Modal } from '@wordpress/components';\nimport PropTypes from 'prop-types';\nimport VisibilitySensor from 'react-visibility-sensor';\nimport moment from 'moment';\n\n/**\n * Internal dependencies\n */\nimport NoteAction from './action';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport classnames from 'classnames';\nimport { recordEvent } from 'lib/tracks';\nimport './style.scss';\nimport { H, Section } from '@woocommerce/components';\nimport { getScreenName } from 'utils';\n\nclass InboxNoteCard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onVisible = this.onVisible.bind( this );\n\t\tthis.hasBeenSeen = false;\n\t\tthis.state = {\n\t\t\tisDismissModalOpen: false,\n\t\t\tdismissType: null,\n\t\t\tclickedActionText: null,\n\t\t};\n\t\tthis.openDismissModal = this.openDismissModal.bind( this );\n\t\tthis.closeDismissModal = this.closeDismissModal.bind( this );\n\t\tthis.bodyNotificationRef = createRef();\n\t\tthis.screen = getScreenName();\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.addEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.bodyNotificationRef.current ) {\n\t\t\tthis.bodyNotificationRef.current.removeEventListener(\n\t\t\t\t'click',\n\t\t\t\t( event ) => this.handleBodyClick( event, this.props )\n\t\t\t);\n\t\t}\n\t}\n\n\thandleBodyClick( event, props ) {\n\t\tconst innerLink = event.target.href;\n\t\tif ( innerLink ) {\n\t\t\tconst { note } = props;\n\n\t\t\trecordEvent( 'wcadmin_inbox_action_click', {\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_content_inner_link: innerLink,\n\t\t\t} );\n\t\t}\n\t}\n\n\t// Trigger a view Tracks event when the note is seen.\n\tonVisible( isVisible ) {\n\t\tif ( isVisible && ! this.hasBeenSeen ) {\n\t\t\tconst { note } = this.props;\n\n\t\t\trecordEvent( 'inbox_note_view', {\n\t\t\t\tnote_content: note.content,\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_type: note.type,\n\t\t\t\tscreen: this.screen,\n\t\t\t} );\n\n\t\t\tthis.hasBeenSeen = true;\n\t\t}\n\t}\n\n\topenDismissModal( type, onToggle ) {\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: true,\n\t\t\tdismissType: type,\n\t\t} );\n\t\tonToggle();\n\t}\n\n\tcloseDismissModal( noteNameDismissConfirmation ) {\n\t\tconst { dismissType } = this.state;\n\t\tconst { note } = this.props;\n\t\tconst noteNameDismissAll = dismissType === 'all' ? true : false;\n\n\t\trecordEvent( 'inbox_action_dismiss', {\n\t\t\tnote_name: note.name,\n\t\t\tnote_title: note.title,\n\t\t\tnote_name_dismiss_all: noteNameDismissAll,\n\t\t\tnote_name_dismiss_confirmation:\n\t\t\t\tnoteNameDismissConfirmation || false,\n\t\t\tscreen: this.screen,\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\tisDismissModalOpen: false,\n\t\t} );\n\t}\n\n\thandleBlur( event, onClose ) {\n\t\tconst dropdownClasses = [\n\t\t\t'woocommerce-admin-dismiss-notification',\n\t\t\t'components-popover__content',\n\t\t];\n\t\t// This line is for IE compatibility.\n\t\tconst relatedTarget = event.relatedTarget\n\t\t\t? event.relatedTarget\n\t\t\t: document.activeElement;\n\t\tconst isClickOutsideDropdown = relatedTarget\n\t\t\t? dropdownClasses.some( ( className ) =>\n\t\t\t\t\trelatedTarget.className.includes( className )\n\t\t\t  )\n\t\t\t: false;\n\t\tif ( isClickOutsideDropdown ) {\n\t\t\tevent.preventDefault();\n\t\t} else {\n\t\t\tonClose();\n\t\t}\n\t}\n\n\trenderDismissButton() {\n\t\tconst { clickedActionText } = this.state;\n\n\t\tif ( clickedActionText ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"woocommerce-admin-dismiss-dropdown\"\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\trenderToggle={ ( { onClose, onToggle } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tonBlur={ ( event ) =>\n\t\t\t\t\t\t\tthis.handleBlur( event, onClose )\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Dismiss', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\tfocusOnMount={ false }\n\t\t\t\tpopoverProps={ { noArrow: true } }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'this', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss this message',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-admin-dismiss-notification\"\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.openDismissModal( 'all', onToggle )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Dismiss all messages',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\tgetDismissConfirmationButton() {\n\t\tconst { note } = this.props;\n\t\tconst { dismissType } = this.state;\n\t\treturn (\n\t\t\t<NoteAction\n\t\t\t\tkey={ note.id }\n\t\t\t\tnoteId={ dismissType === 'all' ? null : note.id }\n\t\t\t\tlabel={ __( \"Yes, I'm sure\", 'woocommerce-admin' ) }\n\t\t\t\tactionCallback={ this.closeDismissModal }\n\t\t\t\tdismiss={ true }\n\t\t\t\tscreen={ this.screen }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderDismissConfirmationModal() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{ __( 'Are you sure?', 'woocommerce-admin' ) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t}\n\t\t\t\tonRequestClose={ () => this.closeDismissModal() }\n\t\t\t\tclassName=\"woocommerce-inbox-dismiss-confirmation_modal\"\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_wrapper\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Dismissed messages cannot be viewed again',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<div className=\"woocommerce-inbox-dismiss-confirmation_buttons\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\tonClick={ () => this.closeDismissModal() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{ this.getDismissConfirmationButton() }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\trenderActions( note ) {\n\t\tconst { actions: noteActions, id: noteId } = note;\n\t\tconst { clickedActionText } = this.state;\n\n\t\tif ( !! clickedActionText ) {\n\t\t\treturn clickedActionText;\n\t\t}\n\n\t\tif ( ! noteActions ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ noteActions.map( ( action, index ) => (\n\t\t\t\t\t<NoteAction\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\tnoteId={ noteId }\n\t\t\t\t\t\taction={ action }\n\t\t\t\t\t\tonClick={ () => this.onActionClicked( action ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tonActionClicked = ( action ) => {\n\t\tif ( ! action.actioned_text ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tclickedActionText: action.actioned_text,\n\t\t} );\n\t};\n\n\trender() {\n\t\tconst { lastRead, note } = this.props;\n\t\tconst { isDismissModalOpen } = this.state;\n\t\tconst {\n\t\t\tcontent,\n\t\t\tdate_created: dateCreated,\n\t\t\tdate_created_gmt: dateCreatedGmt,\n\t\t\timage,\n\t\t\tis_deleted: isDeleted,\n\t\t\tlayout,\n\t\t\tstatus,\n\t\t\ttitle,\n\t\t} = note;\n\n\t\tif ( isDeleted ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst unread =\n\t\t\t! lastRead ||\n\t\t\t! dateCreatedGmt ||\n\t\t\tnew Date( dateCreatedGmt + 'Z' ).getTime() > lastRead;\n\t\tconst date = dateCreated;\n\t\tconst hasImage = layout !== 'plain' && layout !== '';\n\t\tconst cardClassName = classnames( 'woocommerce-inbox-message', layout, {\n\t\t\t'message-is-unread': unread && status === 'unactioned',\n\t\t} );\n\n\t\treturn (\n\t\t\t<VisibilitySensor onChange={ this.onVisible }>\n\t\t\t\t<section className={ cardClassName }>\n\t\t\t\t\t{ hasImage && (\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__image\">\n\t\t\t\t\t\t\t<img src={ image } alt=\"\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t\t{ date && (\n\t\t\t\t\t\t\t\t<span className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t\t\t{ moment.utc( date ).fromNow() }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<H className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<Section className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\tref={ this.bodyNotificationRef }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t\t{ this.renderActions( note ) }\n\t\t\t\t\t\t\t{ this.renderDismissButton() }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ isDismissModalOpen &&\n\t\t\t\t\t\tthis.renderDismissConfirmationModal() }\n\t\t\t\t</section>\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n}\n\nInboxNoteCard.propTypes = {\n\tnote: PropTypes.shape( {\n\t\tid: PropTypes.number,\n\t\tstatus: PropTypes.string,\n\t\ttitle: PropTypes.string,\n\t\tcontent: PropTypes.string,\n\t\tdate_created: PropTypes.string,\n\t\tdate_created_gmt: PropTypes.string,\n\t\tactions: PropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tid: PropTypes.number.isRequired,\n\t\t\t\turl: PropTypes.string,\n\t\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\t\tprimary: PropTypes.bool.isRequired,\n\t\t\t} )\n\t\t),\n\t\tlayout: PropTypes.string,\n\t\timage: PropTypes.string,\n\t\tis_deleted: PropTypes.bool,\n\t} ),\n\tlastRead: PropTypes.number,\n};\n\nexport default InboxNoteCard;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useEffect } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { useUserPreferences } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard } from '../../activity-card';\nimport InboxNotePlaceholder from './placeholder';\nimport ActivityHeader from '../../activity-header';\nimport InboxNoteCard from './card';\nimport { EmptyContent, Section } from '@woocommerce/components';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { getUnreadNotesCount, hasValidNotes } from './utils';\n\nconst renderEmptyCard = () => (\n\t<ActivityCard\n\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\ttitle={ __( 'Your inbox is empty', 'woocommerce-admin' ) }\n\t\ticon={ false }\n\t>\n\t\t{ __(\n\t\t\t'As things begin to happen in your store your inbox will start to fill up. ' +\n\t\t\t\t\"You'll see things like achievements, new feature announcements, extension recommendations and more!\",\n\t\t\t'woocommerce-admin'\n\t\t) }\n\t</ActivityCard>\n);\n\nconst renderNotes = ( {\n\thasNotes,\n\tisDismissUndoRequesting,\n\tisDismissAllUndoRequesting,\n\tlastRead,\n\tnotes,\n} ) => {\n\tif ( isDismissAllUndoRequesting ) {\n\t\treturn;\n\t}\n\n\tif ( ! hasNotes ) {\n\t\treturn renderEmptyCard();\n\t}\n\n\tconst notesArray = Object.keys( notes ).map( ( key ) => notes[ key ] );\n\n\treturn notesArray.map( ( note ) => {\n\t\tif ( isDismissUndoRequesting === note.id ) {\n\t\t\treturn (\n\t\t\t\t<InboxNotePlaceholder\n\t\t\t\t\tclassName=\"banner message-is-unread\"\n\t\t\t\t\tkey={ note.id }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<InboxNoteCard\n\t\t\t\tkey={ note.id }\n\t\t\t\tnote={ note }\n\t\t\t\tlastRead={ lastRead }\n\t\t\t/>\n\t\t);\n\t} );\n};\n\nconst InboxPanel = ( props ) => {\n\tconst {\n\t\tisError,\n\t\tisPanelEmpty,\n\t\tisRequesting,\n\t\tisUndoRequesting,\n\t\tisDismissAllUndoRequesting,\n\t\tisDismissUndoRequesting,\n\t\tnotes,\n\t} = props;\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\tconst lastRead = userPrefs.activity_panel_inbox_last_read;\n\n\tuseEffect( () => {\n\t\tconst mountTime = Date.now();\n\n\t\treturn () => {\n\t\t\tconst userDataFields = {\n\t\t\t\tactivity_panel_inbox_last_read: mountTime,\n\t\t\t};\n\t\t\tupdateUserPreferences( userDataFields );\n\t\t};\n\t}, [] );\n\n\tif ( isError ) {\n\t\tconst title = __(\n\t\t\t'There was an error getting your inbox. Please try again.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\tconst actionCallback = () => {\n\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\twindow.location.reload();\n\t\t};\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<EmptyContent\n\t\t\t\t\ttitle={ title }\n\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\tactionURL={ null }\n\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tconst hasNotes = hasValidNotes( notes );\n\n\tconst isActivityHeaderVisible =\n\t\thasNotes || isRequesting || isUndoRequesting;\n\n\tif ( isPanelEmpty ) {\n\t\tisPanelEmpty( ! hasNotes && ! isActivityHeaderVisible );\n\t}\n\n\t// @todo After having a pagination implemented we should call the method \"getNotes\" with a different query since\n\t// the current one is only getting 25 notes and the count of unread notes only will refer to this 25 and not all the existing ones.\n\treturn (\n\t\t<Fragment>\n\t\t\t{ isActivityHeaderVisible && (\n\t\t\t\t<ActivityHeader\n\t\t\t\t\ttitle={ __( 'Inbox', 'woocommerce-admin' ) }\n\t\t\t\t\tsubtitle={ __(\n\t\t\t\t\t\t'Insights and growth tips for your business',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\tunreadMessages={ getUnreadNotesCount( notes, lastRead ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<div className=\"woocommerce-homepage-notes-wrapper\">\n\t\t\t\t{ ( isRequesting || isDismissAllUndoRequesting ) && (\n\t\t\t\t\t<Section>\n\t\t\t\t\t\t<InboxNotePlaceholder className=\"banner message-is-unread\" />\n\t\t\t\t\t</Section>\n\t\t\t\t) }\n\t\t\t\t<Section>\n\t\t\t\t\t{ ! isRequesting &&\n\t\t\t\t\t\t! isDismissAllUndoRequesting &&\n\t\t\t\t\t\trenderNotes( {\n\t\t\t\t\t\t\thasNotes,\n\t\t\t\t\t\t\tisDismissUndoRequesting,\n\t\t\t\t\t\t\tisDismissAllUndoRequesting,\n\t\t\t\t\t\t\tlastRead,\n\t\t\t\t\t\t\tnotes,\n\t\t\t\t\t\t} ) }\n\t\t\t\t</Section>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetNotes,\n\t\t\tgetNotesError,\n\t\t\tisGetNotesRequesting,\n\t\t\tgetUndoDismissRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst inboxQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\tstatus: 'unactioned',\n\t\t\ttype: QUERY_DEFAULTS.noteTypes,\n\t\t\torderby: 'date',\n\t\t\torder: 'desc',\n\t\t\t_fields: [\n\t\t\t\t'id',\n\t\t\t\t'name',\n\t\t\t\t'title',\n\t\t\t\t'content',\n\t\t\t\t'type',\n\t\t\t\t'status',\n\t\t\t\t'actions',\n\t\t\t\t'date_created',\n\t\t\t\t'date_created_gmt',\n\t\t\t\t'layout',\n\t\t\t\t'image',\n\t\t\t\t'is_deleted',\n\t\t\t],\n\t\t};\n\n\t\tconst notes = getNotes( inboxQuery );\n\t\tconst isError = Boolean( getNotesError( inboxQuery ) );\n\t\tconst isRequesting = isGetNotesRequesting( inboxQuery );\n\t\tconst {\n\t\t\tisUndoRequesting,\n\t\t\tisDismissUndoRequesting,\n\t\t\tisDismissAllUndoRequesting,\n\t\t} = getUndoDismissRequesting();\n\n\t\treturn {\n\t\t\tnotes,\n\t\t\tisError,\n\t\t\tisRequesting,\n\t\t\tisUndoRequesting,\n\t\t\tisDismissUndoRequesting,\n\t\t\tisDismissAllUndoRequesting,\n\t\t};\n\t} )\n)( InboxPanel );\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\n\nclass InboxNotePlaceholder extends Component {\n\trender() {\n\t\tconst { className } = this.props;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ `woocommerce-inbox-message is-placeholder ${ className }` }\n\t\t\t\taria-hidden\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-inbox-message__image\">\n\t\t\t\t\t<div className=\"banner-block\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-inbox-message__wrapper\">\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__content\">\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__date\">\n\t\t\t\t\t\t\t<div className=\"sixth-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__title\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"woocommerce-inbox-message__text\">\n\t\t\t\t\t\t\t<div className=\"line\" />\n\t\t\t\t\t\t\t<div className=\"third-line\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"woocommerce-inbox-message__actions\">\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t\t<div className=\"fifth-line\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nInboxNotePlaceholder.propTypes = {\n\tclassName: PropTypes.string,\n};\n\nexport default InboxNotePlaceholder;\n","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}