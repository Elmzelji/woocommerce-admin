{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/utils.js","webpack://wc.[modulename]/./client/homepage/index.js","webpack://wc.[modulename]/./client/homepage/stats-overview/defaults.js","webpack://wc.[modulename]/./client/homepage/stats-overview/index.js"],"names":["getCountryCode","countryState","split","getCurrencyRegion","region","euCountries","without","getSetting","includes","getProductIdsForCart","profileItems","includeInstalledItems","onboarding","productTypes","productIds","plugins","product_types","forEach","productType","product","installedPlugins","slug","push","theme","themes","find","themeData","id","getPriceValue","price","is_installed","string","Number","decodeEntities","replace","isOnboardingEnabled","ProfileWizard","lazy","Homepage","query","completed","compose","withSelect","select","getProfileItems","DEFAULT_STATS","applyFilters","DEFAULT_HIDDEN_STATS","performanceIndicators","stats","filter","indicator","stat","StatsOverview","userPrefs","updateCurrentUserData","userHiddenStats","hiddenStats","toggleStat","nextHiddenStats","xor","homepage_stats","recordEvent","indicator_name","status","__","map","item","checked","label","propTypes","PropTypes","object","isRequired","func","getCurrentUserData","withDispatch","dispatch"],"mappings":"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","file":"chunks/homepage.5562e28a4503a1a3288a.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { without } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Gets the country code from a country:state value string.\n *\n * @param {string} countryState Country state string, e.g. US:GA.\n * @return {string} Country string.\n */\n\nexport function getCountryCode( countryState ) {\n\tif ( ! countryState ) {\n\t\treturn null;\n\t}\n\n\treturn countryState.split( ':' )[ 0 ];\n}\n\nexport function getCurrencyRegion( countryState ) {\n\tlet region = getCountryCode( countryState );\n\tconst euCountries = without(\n\t\tgetSetting( 'onboarding', { euCountries: [] } ).euCountries,\n\t\t'GB'\n\t);\n\tif ( euCountries.includes( region ) ) {\n\t\tregion = 'EU';\n\t}\n\n\treturn region;\n}\n\n/**\n * Gets the product IDs for items based on the product types and theme selected in the onboarding profiler.\n *\n * @param {Object} profileItems Onboarding profile.\n * @param {boolean} includeInstalledItems Include installed items in returned product IDs.\n * @return {Array} Product Ids.\n */\nexport function getProductIdsForCart(\n\tprofileItems,\n\tincludeInstalledItems = false\n) {\n\tconst onboarding = getSetting( 'onboarding', {} );\n\n\t// The population of onboarding.productTypes only happens if the task list should be shown\n\t// so bail early if it isn't present.\n\tif ( ! onboarding.productTypes ) {\n\t\treturn productIds;\n\t}\n\n\tconst productIds = [];\n\tconst plugins = getSetting( 'plugins', {} );\n\tconst productTypes = profileItems.product_types || [];\n\n\tproductTypes.forEach( ( productType ) => {\n\t\tif (\n\t\t\tonboarding.productTypes[ productType ] &&\n\t\t\tonboarding.productTypes[ productType ].product &&\n\t\t\t( includeInstalledItems ||\n\t\t\t\t! plugins.installedPlugins.includes(\n\t\t\t\t\tonboarding.productTypes[ productType ].slug\n\t\t\t\t) )\n\t\t) {\n\t\t\tproductIds.push( onboarding.productTypes[ productType ].product );\n\t\t}\n\t} );\n\n\tconst theme = onboarding.themes.find(\n\t\t( themeData ) => themeData.slug === profileItems.theme\n\t);\n\n\tif (\n\t\ttheme &&\n\t\ttheme.id &&\n\t\tgetPriceValue( theme.price ) > 0 &&\n\t\t( includeInstalledItems || ! theme.is_installed )\n\t) {\n\t\tproductIds.push( theme.id );\n\t}\n\n\treturn productIds;\n}\n\n/**\n * Get the value of a price from a string, removing any non-numeric characters.\n *\n * @param {string} string Price string.\n * @return {number} Number value.\n */\nexport function getPriceValue( string ) {\n\treturn Number( decodeEntities( string ).replace( /[^0-9.-]+/g, '' ) );\n}\n\n/**\n * Returns if the onboarding feature of WooCommerce Admin should be enabled.\n *\n * While we preform an a/b test of onboarding, the feature will be enabled within the plugin build,\n * but only if the user recieved the test/opted in.\n *\n * @return {boolean} True if the onboarding is enabled.\n */\nexport function isOnboardingEnabled() {\n\tif ( ! window.wcAdminFeatures.onboarding ) {\n\t\treturn false;\n\t}\n\n\treturn getSetting( 'onboardingEnabled', false );\n}\n","/**\n * External dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { Suspense, lazy } from '@wordpress/element';\n\n/**\n * WooCommerce dependencies\n */\nimport { Spinner } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\nimport { isOnboardingEnabled } from 'dashboard/utils';\nimport StatsOverview from './stats-overview';\n\nconst ProfileWizard = lazy( () =>\n\timport( /* webpackChunkName: \"profile-wizard\" */ '../profile-wizard' )\n);\n\nconst Homepage = ( { profileItems, query } ) => {\n\tif ( isOnboardingEnabled() && ! profileItems.completed ) {\n\t\treturn (\n\t\t\t<Suspense fallback={ <Spinner /> }>\n\t\t\t\t<ProfileWizard query={ query } />\n\t\t\t</Suspense>\n\t\t);\n\t}\n\n\treturn <StatsOverview />;\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tif ( ! isOnboardingEnabled() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { getProfileItems } = select( 'wc-api' );\n\t\tconst profileItems = getProfileItems();\n\n\t\treturn { profileItems };\n\t} )\n)( Homepage );\n","/**\n * External dependencies\n */\nimport { applyFilters } from '@wordpress/hooks';\n\nexport const DEFAULT_STATS = applyFilters(\n\t'woocommerce_admin_homepage_default_stats',\n\t[\n\t\t'revenue/total_sales',\n\t\t'revenue/net_revenue',\n\t\t'orders/orders_count',\n\t\t'products/items_sold',\n\t]\n);\n\nexport const DEFAULT_HIDDEN_STATS = [\n\t'revenue/net_revenue',\n\t'products/items_sold',\n];\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { Fragment } from '@wordpress/element';\nimport { xor } from 'lodash';\nimport { withDispatch } from '@wordpress/data';\nimport PropTypes from 'prop-types';\nimport { recordEvent } from 'lib/tracks';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tCard,\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n} from '@woocommerce/components';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\nimport { DEFAULT_STATS, DEFAULT_HIDDEN_STATS } from './defaults';\n\nconst { performanceIndicators } = getSetting( 'dataEndpoints', {\n\tperformanceIndicators: [],\n} );\nconst stats = performanceIndicators.filter( ( indicator ) => {\n\treturn DEFAULT_STATS.includes( indicator.stat );\n} );\n\nexport const StatsOverview = ( { userPrefs, updateCurrentUserData } ) => {\n\tconst userHiddenStats = userPrefs.hiddenStats;\n\tconst hiddenStats = userHiddenStats\n\t\t? userHiddenStats\n\t\t: DEFAULT_HIDDEN_STATS;\n\n\tconst toggleStat = ( stat ) => {\n\t\tconst nextHiddenStats = xor( hiddenStats, [ stat ] );\n\t\tupdateCurrentUserData( {\n\t\t\thomepage_stats: { hiddenStats: nextHiddenStats },\n\t\t} );\n\t\trecordEvent( 'statsoverview_indicators_toggle', {\n\t\t\tindicator_name: stat,\n\t\t\tstatus: nextHiddenStats.includes( stat ) ? 'off' : 'on',\n\t\t} );\n\t};\n\n\treturn (\n\t\t<Card\n\t\t\tclassName=\"woocommerce-analytics__card\"\n\t\t\ttitle={ __( 'Stats overview', 'woocommerce-admin' ) }\n\t\t\tmenu={\n\t\t\t\t<EllipsisMenu\n\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t'Choose which values to display',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t\t\t{ __( 'Display stats:', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t\t\t{ stats.map( ( item ) => {\n\t\t\t\t\t\t\t\tconst checked = ! hiddenStats.includes(\n\t\t\t\t\t\t\t\t\titem.stat\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\t\tisCheckbox\n\t\t\t\t\t\t\t\t\t\tisClickable\n\t\t\t\t\t\t\t\t\t\tkey={ item.stat }\n\t\t\t\t\t\t\t\t\t\tonInvoke={ () =>\n\t\t\t\t\t\t\t\t\t\t\ttoggleStat( item.stat )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ item.label }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\tContent Here\n\t\t</Card>\n\t);\n};\n\nStatsOverview.propTypes = {\n\t/**\n\t * Homepage user preferences.\n\t */\n\tuserPrefs: PropTypes.object.isRequired,\n\t/**\n\t * A method to update user meta.\n\t */\n\tupdateCurrentUserData: PropTypes.func.isRequired,\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getCurrentUserData } = select( 'wc-api' );\n\n\t\treturn {\n\t\t\tuserPrefs: getCurrentUserData().homepage_stats || {},\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateCurrentUserData } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tupdateCurrentUserData,\n\t\t};\n\t} )\n)( StatsOverview );\n"],"sourceRoot":""}