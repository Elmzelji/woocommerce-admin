{"version":3,"sources":["webpack://wc.[modulename]/./client/analytics/components/report-filters/index.js","webpack://wc.[modulename]/./client/dashboard/customizable.js","webpack://wc.[modulename]/./client/dashboard/default-sections.js","webpack://wc.[modulename]/./client/dashboard/section-controls.js","webpack://wc.[modulename]/./client/dashboard/section.js","webpack://wc.[modulename]/./client/lib/currency-context.js"],"names":["ReportFilters","trackDateSelect","bind","trackFilterSelect","trackAdvancedFilterAction","data","report","props","recordEvent","omitBy","isUndefined","filter","action","key","snakeCaseData","Object","keys","reduce","result","property","snakeCase","value","match","advancedFilters","filters","path","query","showDatePicker","defaultDateRange","getDateParamsFromQuery","period","compare","before","after","getCurrentDates","primaryDate","primary","secondaryDate","secondary","dateQuery","Currency","context","LOCALE","siteLocale","getCurrencyConfig","isoDateFormat","Component","contextType","CurrencyContext","withSelect","select","SETTINGS_STORE_NAME","getSetting","woocommerce_default_date_range","propTypes","PropTypes","object","array","string","isRequired","bool","DASHBOARD_FILTERS_FILTER","applyFilters","mergeSectionsWithDefaults","prefSections","length","defaultSections","defaultKeys","map","section","prefKeys","Set","sections","forEach","defaultSection","find","prefSection","push","CustomizableDashboard","useUserPreferences","updateUserPreferences","userPrefs","dashboard_sections","updateSections","newSections","updateSection","updatedKey","newSettings","onChangeHiddenBlocks","updatedHiddenBlocks","hiddenBlocks","onSectionTitleUpdate","updatedTitle","title","toggleVisibility","onToggle","index","findIndex","s","toggledSection","splice","shift","isVisible","onMove","change","movedSection","newIndex","nextJumpedSectionIndex","eventProps","direction","renderAddMore","hiddenSections","isOpen","__","plusCircleFilled","sprintf","icon","renderDashboardReports","visibleSectionKeys","component","partial","getFilteredCurrencyInstance","getQuery","compose","withSelectData","LazyDashboardCharts","lazy","LazyLeaderboards","LazyStorePerformance","DashboardCharts","Leaderboards","StorePerformance","DEFAULT_SECTIONS_FILTER","SectionControls","onMoveUp","onMoveDown","onRemove","isFirst","isLast","onTitleBlur","onTitleChange","titleInput","Section","state","onToggleHiddenBlock","setState","onTitleUpdate","xor","SectionComponent","appCurrency","CurrencyFactory","CURRENCY","config","filteredConfig","createContext"],"mappings":"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","file":"chunks/customizable-dashboard.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\nimport { omitBy, isUndefined, snakeCase } from 'lodash';\nimport { withSelect } from '@wordpress/data';\nimport { ReportFilters as Filters } from '@woocommerce/components';\nimport { LOCALE } from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\nimport {\n\tgetCurrentDates,\n\tgetDateParamsFromQuery,\n\tisoDateFormat,\n} from '@woocommerce/date';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { CurrencyContext } from '../../../lib/currency-context';\n\nclass ReportFilters extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.trackDateSelect = this.trackDateSelect.bind( this );\n\t\tthis.trackFilterSelect = this.trackFilterSelect.bind( this );\n\t\tthis.trackAdvancedFilterAction = this.trackAdvancedFilterAction.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\ttrackDateSelect( data ) {\n\t\tconst { report } = this.props;\n\t\trecordEvent( 'datepicker_update', {\n\t\t\treport,\n\t\t\t...omitBy( data, isUndefined ),\n\t\t} );\n\t}\n\n\ttrackFilterSelect( data ) {\n\t\tconst { report } = this.props;\n\t\trecordEvent( 'analytics_filter', {\n\t\t\treport,\n\t\t\tfilter: data.filter || 'all',\n\t\t} );\n\t}\n\n\ttrackAdvancedFilterAction( action, data ) {\n\t\tconst { report } = this.props;\n\n\t\tswitch ( action ) {\n\t\t\tcase 'add':\n\t\t\t\trecordEvent( 'analytics_filters_add', {\n\t\t\t\t\treport,\n\t\t\t\t\tfilter: data.key,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'remove':\n\t\t\t\trecordEvent( 'analytics_filters_remove', {\n\t\t\t\t\treport,\n\t\t\t\t\tfilter: data.key,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'filter':\n\t\t\t\tconst snakeCaseData = Object.keys( data ).reduce(\n\t\t\t\t\t( result, property ) => {\n\t\t\t\t\t\tresult[ snakeCase( property ) ] = data[ property ];\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t);\n\t\t\t\trecordEvent( 'analytics_filters_filter', {\n\t\t\t\t\treport,\n\t\t\t\t\t...snakeCaseData,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tcase 'clear_all':\n\t\t\t\trecordEvent( 'analytics_filters_clear_all', { report } );\n\t\t\t\tbreak;\n\t\t\tcase 'match':\n\t\t\t\trecordEvent( 'analytics_filters_all_any', {\n\t\t\t\t\treport,\n\t\t\t\t\tvalue: data.match,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tadvancedFilters,\n\t\t\tfilters,\n\t\t\tpath,\n\t\t\tquery,\n\t\t\tshowDatePicker,\n\t\t\tdefaultDateRange,\n\t\t} = this.props;\n\t\tconst { period, compare, before, after } = getDateParamsFromQuery(\n\t\t\tquery,\n\t\t\tdefaultDateRange\n\t\t);\n\t\tconst {\n\t\t\tprimary: primaryDate,\n\t\t\tsecondary: secondaryDate,\n\t\t} = getCurrentDates( query, defaultDateRange );\n\t\tconst dateQuery = {\n\t\t\tperiod,\n\t\t\tcompare,\n\t\t\tbefore,\n\t\t\tafter,\n\t\t\tprimaryDate,\n\t\t\tsecondaryDate,\n\t\t};\n\t\tconst Currency = this.context;\n\n\t\treturn (\n\t\t\t<Filters\n\t\t\t\tquery={ query }\n\t\t\t\tsiteLocale={ LOCALE.siteLocale }\n\t\t\t\tcurrency={ Currency.getCurrencyConfig() }\n\t\t\t\tpath={ path }\n\t\t\t\tfilters={ filters }\n\t\t\t\tadvancedFilters={ advancedFilters }\n\t\t\t\tshowDatePicker={ showDatePicker }\n\t\t\t\tonDateSelect={ this.trackDateSelect }\n\t\t\t\tonFilterSelect={ this.trackFilterSelect }\n\t\t\t\tonAdvancedFilterAction={ this.trackAdvancedFilterAction }\n\t\t\t\tdateQuery={ dateQuery }\n\t\t\t\tisoDateFormat={ isoDateFormat }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nReportFilters.contextType = CurrencyContext;\n\nexport default withSelect( ( select ) => {\n\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\tSETTINGS_STORE_NAME\n\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\treturn { defaultDateRange };\n} )( ReportFilters );\n\nReportFilters.propTypes = {\n\t/**\n\t * Config option passed through to `AdvancedFilters`\n\t */\n\tadvancedFilters: PropTypes.object,\n\t/**\n\t * Config option passed through to `FilterPicker` - if not used, `FilterPicker` is not displayed.\n\t */\n\tfilters: PropTypes.array,\n\t/**\n\t * The `path` parameter supplied by React-Router\n\t */\n\tpath: PropTypes.string.isRequired,\n\t/**\n\t * The query string represented in object form\n\t */\n\tquery: PropTypes.object,\n\t/**\n\t * Whether the date picker must be shown..\n\t */\n\tshowDatePicker: PropTypes.bool,\n\t/**\n\t * The report where filter are placed.\n\t */\n\treport: PropTypes.string.isRequired,\n};\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { partial } from 'lodash';\nimport { Dropdown, Button, Icon } from '@wordpress/components';\nimport { applyFilters } from '@wordpress/hooks';\nimport { Icon as WPIcon, plusCircleFilled } from '@wordpress/icons';\nimport { withSelect } from '@wordpress/data';\nimport { H } from '@woocommerce/components';\nimport { SETTINGS_STORE_NAME, useUserPreferences } from '@woocommerce/data';\nimport { getQuery } from '@woocommerce/navigation';\nimport {\n\tgetCurrentDates,\n\tgetDateParamsFromQuery,\n\tisoDateFormat,\n} from '@woocommerce/date';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport defaultSections from './default-sections';\nimport Section from './section';\nimport ReportFilters from '../analytics/components/report-filters';\nimport {\n\tCurrencyContext,\n\tgetFilteredCurrencyInstance,\n} from '../lib/currency-context';\n\nconst DASHBOARD_FILTERS_FILTER = 'woocommerce_admin_dashboard_filters';\nconst filters = applyFilters( DASHBOARD_FILTERS_FILTER, [] );\n\nconst mergeSectionsWithDefaults = ( prefSections ) => {\n\tif ( ! prefSections || prefSections.length === 0 ) {\n\t\treturn defaultSections;\n\t}\n\tconst defaultKeys = defaultSections.map( ( section ) => section.key );\n\tconst prefKeys = prefSections.map( ( section ) => section.key );\n\tconst keys = new Set( [ ...prefKeys, ...defaultKeys ] );\n\tconst sections = [];\n\n\tkeys.forEach( ( key ) => {\n\t\tconst defaultSection = defaultSections.find(\n\t\t\t( section ) => section.key === key\n\t\t);\n\t\tif ( ! defaultSection ) {\n\t\t\treturn;\n\t\t}\n\t\tconst prefSection = prefSections.find(\n\t\t\t( section ) => section.key === key\n\t\t);\n\n\t\tsections.push( {\n\t\t\t...defaultSection,\n\t\t\t...prefSection,\n\t\t} );\n\t} );\n\n\treturn sections;\n};\n\nconst CustomizableDashboard = ( { defaultDateRange, path, query } ) => {\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\n\tconst sections = mergeSectionsWithDefaults( userPrefs.dashboard_sections );\n\n\tconst updateSections = ( newSections ) => {\n\t\tupdateUserPreferences( { dashboard_sections: newSections } );\n\t};\n\n\tconst updateSection = ( updatedKey, newSettings ) => {\n\t\tconst newSections = sections.map( ( section ) => {\n\t\t\tif ( section.key === updatedKey ) {\n\t\t\t\treturn {\n\t\t\t\t\t...section,\n\t\t\t\t\t...newSettings,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn section;\n\t\t} );\n\t\tupdateSections( newSections );\n\t};\n\n\tconst onChangeHiddenBlocks = ( updatedKey ) => {\n\t\treturn ( updatedHiddenBlocks ) => {\n\t\t\tupdateSection( updatedKey, {\n\t\t\t\thiddenBlocks: updatedHiddenBlocks,\n\t\t\t} );\n\t\t};\n\t};\n\n\tconst onSectionTitleUpdate = ( updatedKey ) => {\n\t\treturn ( updatedTitle ) => {\n\t\t\trecordEvent( 'dash_section_rename', { key: updatedKey } );\n\t\t\tupdateSection( updatedKey, { title: updatedTitle } );\n\t\t};\n\t};\n\n\tconst toggleVisibility = ( key, onToggle ) => {\n\t\treturn () => {\n\t\t\tif ( onToggle ) {\n\t\t\t\t// Close the dropdown before setting state so an action is not performed on an unmounted component.\n\t\t\t\tonToggle();\n\t\t\t}\n\t\t\t// When toggling visibility, place section at the end of the array.\n\t\t\tconst index = sections.findIndex( ( s ) => key === s.key );\n\t\t\tconst toggledSection = sections.splice( index, 1 ).shift();\n\t\t\ttoggledSection.isVisible = ! toggledSection.isVisible;\n\t\t\tsections.push( toggledSection );\n\n\t\t\tif ( toggledSection.isVisible ) {\n\t\t\t\trecordEvent( 'dash_section_add', { key: toggledSection.key } );\n\t\t\t} else {\n\t\t\t\trecordEvent( 'dash_section_remove', {\n\t\t\t\t\tkey: toggledSection.key,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tupdateSections( sections );\n\t\t};\n\t};\n\n\tconst onMove = ( index, change ) => {\n\t\tconst movedSection = sections.splice( index, 1 ).shift();\n\t\tconst newIndex = index + change;\n\n\t\t// Figure out the index of the skipped section.\n\t\tconst nextJumpedSectionIndex = change < 0 ? newIndex : newIndex - 1;\n\n\t\tif (\n\t\t\tsections[ nextJumpedSectionIndex ].isVisible || // Is the skipped section visible?\n\t\t\tindex === 0 || // Will this be the first element?\n\t\t\tindex === sections.length - 1 // Will this be the last element?\n\t\t) {\n\t\t\t// Yes, lets insert.\n\t\t\tsections.splice( newIndex, 0, movedSection );\n\t\t\tupdateSections( sections );\n\n\t\t\tconst eventProps = {\n\t\t\t\tkey: movedSection.key,\n\t\t\t\tdirection: change > 0 ? 'down' : 'up',\n\t\t\t};\n\t\t\trecordEvent( 'dash_section_order_change', eventProps );\n\t\t} else {\n\t\t\t// No, lets try the next one.\n\t\t\tonMove( index, change + change );\n\t\t}\n\t};\n\n\tconst renderAddMore = () => {\n\t\tconst hiddenSections = sections.filter(\n\t\t\t( section ) => section.isVisible === false\n\t\t);\n\n\t\tif ( hiddenSections.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tposition=\"top center\"\n\t\t\t\tclassName=\"woocommerce-dashboard-section__add-more\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\ttitle={ __( 'Add more sections', 'woocommerce-admin' ) }\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t>\n\t\t\t\t\t\t<WPIcon icon={ plusCircleFilled } />\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<H>\n\t\t\t\t\t\t\t{ __( 'Dashboard Sections', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</H>\n\t\t\t\t\t\t<div className=\"woocommerce-dashboard-section__add-more-choices\">\n\t\t\t\t\t\t\t{ hiddenSections.map( ( section ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tkey={ section.key }\n\t\t\t\t\t\t\t\t\t\tonClick={ toggleVisibility(\n\t\t\t\t\t\t\t\t\t\t\tsection.key,\n\t\t\t\t\t\t\t\t\t\t\tonToggle\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-dashboard-section__add-more-btn\"\n\t\t\t\t\t\t\t\t\t\ttitle={ sprintf(\n\t\t\t\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t\t\t\t'Add %s section',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tsection.title\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\ticon={ section.icon }\n\t\t\t\t\t\t\t\t\t\t\tsize={ 30 }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-dashboard-section__add-more-btn-title\">\n\t\t\t\t\t\t\t\t\t\t\t{ section.title }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst renderDashboardReports = () => {\n\t\tconst { period, compare, before, after } = getDateParamsFromQuery(\n\t\t\tquery,\n\t\t\tdefaultDateRange\n\t\t);\n\t\tconst {\n\t\t\tprimary: primaryDate,\n\t\t\tsecondary: secondaryDate,\n\t\t} = getCurrentDates( query, defaultDateRange );\n\t\tconst dateQuery = {\n\t\t\tperiod,\n\t\t\tcompare,\n\t\t\tbefore,\n\t\t\tafter,\n\t\t\tprimaryDate,\n\t\t\tsecondaryDate,\n\t\t};\n\t\tconst visibleSectionKeys = sections\n\t\t\t.filter( ( section ) => section.isVisible )\n\t\t\t.map( ( section ) => section.key );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ReportFilters\n\t\t\t\t\treport=\"dashboard\"\n\t\t\t\t\tquery={ query }\n\t\t\t\t\tpath={ path }\n\t\t\t\t\tdateQuery={ dateQuery }\n\t\t\t\t\tisoDateFormat={ isoDateFormat }\n\t\t\t\t\tfilters={ filters }\n\t\t\t\t/>\n\t\t\t\t{ sections.map( ( section, index ) => {\n\t\t\t\t\tif ( section.isVisible ) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Section\n\t\t\t\t\t\t\t\tcomponent={ section.component }\n\t\t\t\t\t\t\t\thiddenBlocks={ section.hiddenBlocks }\n\t\t\t\t\t\t\t\tkey={ section.key }\n\t\t\t\t\t\t\t\tonChangeHiddenBlocks={ onChangeHiddenBlocks(\n\t\t\t\t\t\t\t\t\tsection.key\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tonTitleUpdate={ onSectionTitleUpdate(\n\t\t\t\t\t\t\t\t\tsection.key\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tpath={ path }\n\t\t\t\t\t\t\t\tquery={ query }\n\t\t\t\t\t\t\t\ttitle={ section.title }\n\t\t\t\t\t\t\t\tonMove={ partial( onMove, index ) }\n\t\t\t\t\t\t\t\tonRemove={ toggleVisibility( section.key ) }\n\t\t\t\t\t\t\t\tisFirst={\n\t\t\t\t\t\t\t\t\tsection.key === visibleSectionKeys[ 0 ]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisLast={\n\t\t\t\t\t\t\t\t\tsection.key ===\n\t\t\t\t\t\t\t\t\tvisibleSectionKeys[\n\t\t\t\t\t\t\t\t\t\tvisibleSectionKeys.length - 1\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfilters={ filters }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t} ) }\n\t\t\t\t{ renderAddMore() }\n\t\t\t</Fragment>\n\t\t);\n\t};\n\n\treturn (\n\t\t<CurrencyContext.Provider\n\t\t\tvalue={ getFilteredCurrencyInstance( getQuery() ) }\n\t\t>\n\t\t\t{ renderDashboardReports() }\n\t\t</CurrencyContext.Provider>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst withSelectData = {\n\t\t\tdefaultDateRange,\n\t\t};\n\n\t\treturn withSelectData;\n\t} )\n)( CustomizableDashboard );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport { lazy, Suspense } from '@wordpress/element';\nimport { Spinner } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nconst LazyDashboardCharts = lazy( () =>\n\timport( /* webpackChunkName: \"dashboard-charts\" */ './dashboard-charts' )\n);\nconst LazyLeaderboards = lazy( () =>\n\timport( /* webpackChunkName: \"leaderboards\" */ './leaderboards' )\n);\nconst LazyStorePerformance = lazy( () =>\n\timport( /* webpackChunkName: \"store-performance\" */ './store-performance' )\n);\n\nconst DashboardCharts = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyDashboardCharts { ...props } />\n\t</Suspense>\n);\n\nconst Leaderboards = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyLeaderboards { ...props } />\n\t</Suspense>\n);\n\nconst StorePerformance = ( props ) => (\n\t<Suspense fallback={ <Spinner /> }>\n\t\t<LazyStorePerformance { ...props } />\n\t</Suspense>\n);\n\nconst DEFAULT_SECTIONS_FILTER = 'woocommerce_dashboard_default_sections';\n\nexport default applyFilters( DEFAULT_SECTIONS_FILTER, [\n\t{\n\t\tkey: 'store-performance',\n\t\tcomponent: StorePerformance,\n\t\ttitle: __( 'Performance', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'arrow-right-alt',\n\t\thiddenBlocks: [\n\t\t\t'coupons/amount',\n\t\t\t'coupons/orders_count',\n\t\t\t'downloads/download_count',\n\t\t\t'taxes/order_tax',\n\t\t\t'taxes/total_tax',\n\t\t\t'taxes/shipping_tax',\n\t\t\t'revenue/shipping',\n\t\t\t'orders/avg_order_value',\n\t\t\t'revenue/refunds',\n\t\t\t'revenue/gross_sales',\n\t\t],\n\t},\n\t{\n\t\tkey: 'charts',\n\t\tcomponent: DashboardCharts,\n\t\ttitle: __( 'Charts', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'chart-bar',\n\t\thiddenBlocks: [\n\t\t\t'orders_avg_order_value',\n\t\t\t'avg_items_per_order',\n\t\t\t'products_items_sold',\n\t\t\t'revenue_total_sales',\n\t\t\t'revenue_refunds',\n\t\t\t'coupons_amount',\n\t\t\t'coupons_orders_count',\n\t\t\t'revenue_shipping',\n\t\t\t'taxes_total_tax',\n\t\t\t'taxes_order_tax',\n\t\t\t'taxes_shipping_tax',\n\t\t\t'downloads_download_count',\n\t\t],\n\t},\n\t{\n\t\tkey: 'leaderboards',\n\t\tcomponent: Leaderboards,\n\t\ttitle: __( 'Leaderboards', 'woocommerce-admin' ),\n\t\tisVisible: true,\n\t\ticon: 'editor-ol',\n\t\thiddenBlocks: [ 'coupons', 'customers' ],\n\t},\n] );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Icon, TextControl } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { MenuItem } from '@woocommerce/components';\n\nclass SectionControls extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onMoveUp = this.onMoveUp.bind( this );\n\t\tthis.onMoveDown = this.onMoveDown.bind( this );\n\t}\n\n\tonMoveUp() {\n\t\tconst { onMove, onToggle } = this.props;\n\t\tonMove( -1 );\n\t\t// Close the dropdown\n\t\tonToggle();\n\t}\n\n\tonMoveDown() {\n\t\tconst { onMove, onToggle } = this.props;\n\t\tonMove( 1 );\n\t\t// Close the dropdown\n\t\tonToggle();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tonRemove,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tonTitleBlur,\n\t\t\tonTitleChange,\n\t\t\ttitleInput,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"woocommerce-ellipsis-menu__item\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Section Title', 'woocommerce-admin' ) }\n\t\t\t\t\t\tonBlur={ onTitleBlur }\n\t\t\t\t\t\tonChange={ onTitleChange }\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tvalue={ titleInput }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-dashboard-section-controls\">\n\t\t\t\t\t{ ! isFirst && (\n\t\t\t\t\t\t<MenuItem isClickable onInvoke={ this.onMoveUp }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ 'arrow-up-alt2' }\n\t\t\t\t\t\t\t\tlabel={ __( 'Move up' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ __( 'Move up', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! isLast && (\n\t\t\t\t\t\t<MenuItem isClickable onInvoke={ this.onMoveDown }>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ 'arrow-down-alt2' }\n\t\t\t\t\t\t\t\tlabel={ __( 'Move Down' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ __( 'Move Down', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t\t<MenuItem isClickable onInvoke={ onRemove }>\n\t\t\t\t\t\t<Icon icon={ 'trash' } label={ __( 'Remove block' ) } />\n\t\t\t\t\t\t{ __( 'Remove section', 'woocommerce-admin' ) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default SectionControls;\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { xor } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport SectionControls from './section-controls';\n\nexport default class Section extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { title } = props;\n\n\t\tthis.state = {\n\t\t\ttitleInput: title,\n\t\t};\n\n\t\tthis.onToggleHiddenBlock = this.onToggleHiddenBlock.bind( this );\n\t\tthis.onTitleChange = this.onTitleChange.bind( this );\n\t\tthis.onTitleBlur = this.onTitleBlur.bind( this );\n\t}\n\n\tonTitleChange( updatedTitle ) {\n\t\tthis.setState( { titleInput: updatedTitle } );\n\t}\n\n\tonTitleBlur() {\n\t\tconst { onTitleUpdate, title } = this.props;\n\t\tconst { titleInput } = this.state;\n\n\t\tif ( titleInput === '' ) {\n\t\t\tthis.setState( { titleInput: title } );\n\t\t} else if ( onTitleUpdate ) {\n\t\t\tonTitleUpdate( titleInput );\n\t\t}\n\t}\n\n\tonToggleHiddenBlock( key ) {\n\t\treturn () => {\n\t\t\tconst hiddenBlocks = xor( this.props.hiddenBlocks, [ key ] );\n\t\t\tthis.props.onChangeHiddenBlocks( hiddenBlocks );\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { component: SectionComponent, ...props } = this.props;\n\t\tconst { titleInput } = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-dashboard-section\">\n\t\t\t\t<SectionComponent\n\t\t\t\t\tonTitleChange={ this.onTitleChange }\n\t\t\t\t\tonTitleBlur={ this.onTitleBlur }\n\t\t\t\t\tonToggleHiddenBlock={ this.onToggleHiddenBlock }\n\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\tcontrols={ SectionControls }\n\t\t\t\t\t{ ...props }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { createContext } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport CurrencyFactory from '@woocommerce/currency';\nimport { CURRENCY } from '@woocommerce/wc-admin-settings';\n\nconst appCurrency = CurrencyFactory( CURRENCY );\n\nexport const getFilteredCurrencyInstance = ( query ) => {\n\tconst config = appCurrency.getCurrencyConfig();\n\tconst filteredConfig = applyFilters(\n\t\t'woocommerce_admin_report_currency',\n\t\tconfig,\n\t\tquery\n\t);\n\treturn CurrencyFactory( filteredConfig );\n};\n\nexport const CurrencyContext = createContext(\n\tappCurrency // default value\n);\n"],"sourceRoot":""}