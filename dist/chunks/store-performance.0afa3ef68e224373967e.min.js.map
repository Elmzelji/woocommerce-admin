{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/store-performance/index.js"],"names":["getSetting","performanceIndicators","indicators","StorePerformance","props","hiddenBlocks","isFirst","isLast","onMove","onRemove","onTitleBlur","onTitleChange","onToggleHiddenBlock","titleInput","Controls","controls","__","onToggle","map","indicator","i","checked","includes","stat","recordEvent","status","key","label","window","query","primaryRequesting","secondaryRequesting","primaryError","secondaryError","primaryData","secondaryData","userIndicators","defaultDateRange","length","persistedQuery","getPersistedQuery","getDateParamsFromQuery","compare","prevLabel","context","formatCurrency","getCurrency","currency","primaryItem","find","data","secondaryItem","href","_links","report","reportUrl","getNewPath","chart","isCurrency","format","delta","calculateDelta","value","primaryValue","formatValue","secondaryValue","title","renderMenu","renderList","Component","contextType","CurrencyContext","compose","withSelect","select","getReportItems","getReportItemsError","isReportItemsRequesting","SETTINGS_STORE_NAME","woocommerce_default_date_range","datesFromQuery","getCurrentDates","endPrimary","primary","before","endSecondary","secondary","filter","statKeys","join","primaryQuery","after","appendTimestamp","isSame","moment","stats","secondaryQuery","withDispatch","dispatch","updateCurrentUserData"],"mappings":"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","file":"chunks/store-performance.0afa3ef68e224373967e.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport moment from 'moment';\nimport { find } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tgetCurrentDates,\n\tappendTimestamp,\n\tgetDateParamsFromQuery,\n} from 'lib/date';\nimport { getNewPath, getPersistedQuery } from '@woocommerce/navigation';\nimport { calculateDelta, formatValue } from '@woocommerce/number';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n\tSectionHeader,\n\tSummaryList,\n\tSummaryListPlaceholder,\n\tSummaryNumber,\n} from '@woocommerce/components';\nimport withSelect from 'wc-api/with-select';\nimport './style.scss';\nimport { recordEvent } from 'lib/tracks';\nimport { CurrencyContext } from 'lib/currency-context';\n\nconst { performanceIndicators: indicators } = getSetting( 'dataEndpoints', {\n\tperformanceIndicators: [],\n} );\n\nclass StorePerformance extends Component {\n\trenderMenu() {\n\t\tconst {\n\t\t\thiddenBlocks,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tonMove,\n\t\t\tonRemove,\n\t\t\tonTitleBlur,\n\t\t\tonTitleChange,\n\t\t\tonToggleHiddenBlock,\n\t\t\ttitleInput,\n\t\t\tcontrols: Controls,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<EllipsisMenu\n\t\t\t\tlabel={ __(\n\t\t\t\t\t'Choose which analytics to display and the section name',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t\t{ __( 'Display Stats:', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t\t{ indicators.map( ( indicator, i ) => {\n\t\t\t\t\t\t\tconst checked = ! hiddenBlocks.includes(\n\t\t\t\t\t\t\t\tindicator.stat\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\tisCheckbox\n\t\t\t\t\t\t\t\t\tisClickable\n\t\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\t\tonInvoke={ () => {\n\t\t\t\t\t\t\t\t\t\tonToggleHiddenBlock( indicator.stat )();\n\t\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_toggle', {\n\t\t\t\t\t\t\t\t\t\t\tstatus: checked ? 'off' : 'on',\n\t\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ indicator.label }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t{ window.wcAdminFeatures[\n\t\t\t\t\t\t\t'analytics-dashboard/customizable'\n\t\t\t\t\t\t] && (\n\t\t\t\t\t\t\t<Controls\n\t\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\t\tonMove={ onMove }\n\t\t\t\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\t\t\tonTitleBlur={ onTitleBlur }\n\t\t\t\t\t\t\t\tonTitleChange={ onTitleChange }\n\t\t\t\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tconst {\n\t\t\tquery,\n\t\t\tprimaryRequesting,\n\t\t\tsecondaryRequesting,\n\t\t\tprimaryError,\n\t\t\tsecondaryError,\n\t\t\tprimaryData,\n\t\t\tsecondaryData,\n\t\t\tuserIndicators,\n\t\t\tdefaultDateRange,\n\t\t} = this.props;\n\t\tif ( primaryRequesting || secondaryRequesting ) {\n\t\t\treturn (\n\t\t\t\t<SummaryListPlaceholder\n\t\t\t\t\tnumberOfItems={ userIndicators.length }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif ( primaryError || secondaryError ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst persistedQuery = getPersistedQuery( query );\n\n\t\tconst { compare } = getDateParamsFromQuery( query, defaultDateRange );\n\t\tconst prevLabel =\n\t\t\tcompare === 'previous_period'\n\t\t\t\t? __( 'Previous Period:', 'woocommerce-admin' )\n\t\t\t\t: __( 'Previous Year:', 'woocommerce-admin' );\n\t\tconst { formatCurrency, getCurrency } = this.context;\n\t\tconst currency = getCurrency();\n\t\treturn (\n\t\t\t<SummaryList>\n\t\t\t\t{ () =>\n\t\t\t\t\tuserIndicators.map( ( indicator, i ) => {\n\t\t\t\t\t\tconst primaryItem = find(\n\t\t\t\t\t\t\tprimaryData.data,\n\t\t\t\t\t\t\t( data ) => data.stat === indicator.stat\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst secondaryItem = find(\n\t\t\t\t\t\t\tsecondaryData.data,\n\t\t\t\t\t\t\t( data ) => data.stat === indicator.stat\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif ( ! primaryItem || ! secondaryItem ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst href =\n\t\t\t\t\t\t\t( primaryItem._links &&\n\t\t\t\t\t\t\t\tprimaryItem._links.report[ 0 ] &&\n\t\t\t\t\t\t\t\tprimaryItem._links.report[ 0 ].href ) ||\n\t\t\t\t\t\t\t'';\n\t\t\t\t\t\tconst reportUrl =\n\t\t\t\t\t\t\t( href &&\n\t\t\t\t\t\t\t\tgetNewPath( persistedQuery, href, {\n\t\t\t\t\t\t\t\t\tchart: primaryItem.chart,\n\t\t\t\t\t\t\t\t} ) ) ||\n\t\t\t\t\t\t\t'';\n\t\t\t\t\t\tconst isCurrency = primaryItem.format === 'currency';\n\n\t\t\t\t\t\tconst delta = calculateDelta(\n\t\t\t\t\t\t\tprimaryItem.value,\n\t\t\t\t\t\t\tsecondaryItem.value\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst primaryValue = isCurrency\n\t\t\t\t\t\t\t? formatCurrency( primaryItem.value )\n\t\t\t\t\t\t\t: formatValue(\n\t\t\t\t\t\t\t\t\tcurrency,\n\t\t\t\t\t\t\t\t\tprimaryItem.format,\n\t\t\t\t\t\t\t\t\tprimaryItem.value\n\t\t\t\t\t\t\t  );\n\t\t\t\t\t\tconst secondaryValue = isCurrency\n\t\t\t\t\t\t\t? formatCurrency( secondaryItem.value )\n\t\t\t\t\t\t\t: formatValue(\n\t\t\t\t\t\t\t\t\tcurrency,\n\t\t\t\t\t\t\t\t\tsecondaryItem.format,\n\t\t\t\t\t\t\t\t\tsecondaryItem.value\n\t\t\t\t\t\t\t  );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SummaryNumber\n\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\thref={ reportUrl }\n\t\t\t\t\t\t\t\tlabel={ indicator.label }\n\t\t\t\t\t\t\t\tvalue={ primaryValue }\n\t\t\t\t\t\t\t\tprevLabel={ prevLabel }\n\t\t\t\t\t\t\t\tprevValue={ secondaryValue }\n\t\t\t\t\t\t\t\tdelta={ delta }\n\t\t\t\t\t\t\t\tonLinkClickCallback={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_click', {\n\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</SummaryList>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { userIndicators, title } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<SectionHeader\n\t\t\t\t\ttitle={\n\t\t\t\t\t\ttitle || __( 'Store Performance', 'woocommerce-admin' )\n\t\t\t\t\t}\n\t\t\t\t\tmenu={ this.renderMenu() }\n\t\t\t\t/>\n\t\t\t\t{ userIndicators.length > 0 && (\n\t\t\t\t\t<div className=\"woocommerce-dashboard__store-performance\">\n\t\t\t\t\t\t{ this.renderList() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nStorePerformance.contextType = CurrencyContext;\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { hiddenBlocks, query } = props;\n\t\tconst {\n\t\t\tgetReportItems,\n\t\t\tgetReportItemsError,\n\t\t\tisReportItemsRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst datesFromQuery = getCurrentDates( query, defaultDateRange );\n\t\tconst endPrimary = datesFromQuery.primary.before;\n\t\tconst endSecondary = datesFromQuery.secondary.before;\n\t\tconst userIndicators = indicators.filter(\n\t\t\t( indicator ) => ! hiddenBlocks.includes( indicator.stat )\n\t\t);\n\t\tconst statKeys = userIndicators\n\t\t\t.map( ( indicator ) => indicator.stat )\n\t\t\t.join( ',' );\n\n\t\tif ( statKeys.length === 0 ) {\n\t\t\treturn {\n\t\t\t\thiddenBlocks,\n\t\t\t\tuserIndicators,\n\t\t\t\tindicators,\n\t\t\t\tdefaultDateRange,\n\t\t\t};\n\t\t}\n\n\t\tconst primaryQuery = {\n\t\t\tafter: appendTimestamp( datesFromQuery.primary.after, 'start' ),\n\t\t\tbefore: appendTimestamp(\n\t\t\t\tendPrimary,\n\t\t\t\tendPrimary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t\t),\n\t\t\tstats: statKeys,\n\t\t};\n\n\t\tconst secondaryQuery = {\n\t\t\tafter: appendTimestamp( datesFromQuery.secondary.after, 'start' ),\n\t\t\tbefore: appendTimestamp(\n\t\t\t\tendSecondary,\n\t\t\t\tendSecondary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t\t),\n\t\t\tstats: statKeys,\n\t\t};\n\n\t\tconst primaryData = getReportItems(\n\t\t\t'performance-indicators',\n\t\t\tprimaryQuery\n\t\t);\n\t\tconst primaryError =\n\t\t\tgetReportItemsError( 'performance-indicators', primaryQuery ) ||\n\t\t\tnull;\n\t\tconst primaryRequesting = isReportItemsRequesting(\n\t\t\t'performance-indicators',\n\t\t\tprimaryQuery\n\t\t);\n\n\t\tconst secondaryData = getReportItems(\n\t\t\t'performance-indicators',\n\t\t\tsecondaryQuery\n\t\t);\n\t\tconst secondaryError =\n\t\t\tgetReportItemsError( 'performance-indicators', secondaryQuery ) ||\n\t\t\tnull;\n\t\tconst secondaryRequesting = isReportItemsRequesting(\n\t\t\t'performance-indicators',\n\t\t\tsecondaryQuery\n\t\t);\n\n\t\treturn {\n\t\t\thiddenBlocks,\n\t\t\tuserIndicators,\n\t\t\tindicators,\n\t\t\tprimaryData,\n\t\t\tprimaryError,\n\t\t\tprimaryRequesting,\n\t\t\tsecondaryData,\n\t\t\tsecondaryError,\n\t\t\tsecondaryRequesting,\n\t\t\tdefaultDateRange,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateCurrentUserData } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tupdateCurrentUserData,\n\t\t};\n\t} )\n)( StorePerformance );\n"],"sourceRoot":""}