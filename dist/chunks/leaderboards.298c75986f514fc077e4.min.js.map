{"version":3,"sources":["webpack://wc.[modulename]/./client/analytics/components/leaderboard/index.js","webpack://wc.[modulename]/./client/analytics/components/leaderboard/style.scss","webpack://wc.[modulename]/./client/dashboard/leaderboards/index.js","webpack://wc.[modulename]/./client/dashboard/leaderboards/style.scss","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["Leaderboard","props","headers","map","header","i","isLeftAligned","hiddenByDefault","isSortable","key","label","rows","row","column","display","sanitizeHTML","value","isRequesting","isError","totalRows","title","classes","getFormattedRows","length","__","getFormattedHeaders","Component","propTypes","PropTypes","arrayOf","shape","string","id","isRequired","query","object","node","oneOfType","number","bool","defaultProps","compose","withSelect","select","filters","SETTINGS_STORE_NAME","getSetting","defaultDateRange","woocommerce_default_date_range","filterQuery","getFilterQuery","leaderboardQuery","per_page","persisted_query","getPersistedQuery","leaderboardData","getLeaderboard","renderLeaderboardToggles","allLeaderboards","hiddenBlocks","onToggleHiddenBlock","leaderboard","checked","includes","recordEvent","status","renderLeaderboards","rowsPerTable","undefined","Leaderboards","Controls","controls","isFirst","isLast","onMove","onRemove","onTitleBlur","onTitleChange","titleInput","useUserPreferences","updateUserPreferences","userPrefs","useState","parseInt","dashboard_leaderboard_rows","setRowsPerTableState","setRowsPerTable","userDataFields","renderMenu","onToggle","Array","from","v","window","wcAdminFeatures","getItems","getItemsError","isGetItemsRequesting","leaderboards","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/leaderboards.298c75986f514fc077e4.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, EmptyTable, TableCard } from '@woocommerce/components';\nimport { getPersistedQuery } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { getLeaderboard } from 'wc-api/items/utils';\nimport ReportError from 'analytics/components/report-error';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport withSelect from 'wc-api/with-select';\nimport { getFilterQuery } from 'wc-api/reports/utils';\nimport './style.scss';\n\nexport class Leaderboard extends Component {\n\tgetFormattedHeaders() {\n\t\treturn this.props.headers.map( ( header, i ) => {\n\t\t\treturn {\n\t\t\t\tisLeftAligned: i === 0,\n\t\t\t\thiddenByDefault: false,\n\t\t\t\tisSortable: false,\n\t\t\t\tkey: header.label,\n\t\t\t\tlabel: header.label,\n\t\t\t};\n\t\t} );\n\t}\n\n\tgetFormattedRows() {\n\t\treturn this.props.rows.map( ( row ) => {\n\t\t\treturn row.map( ( column ) => {\n\t\t\t\treturn {\n\t\t\t\t\tdisplay: (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tcolumn.display\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t\tvalue: column.value,\n\t\t\t\t};\n\t\t\t} );\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { isRequesting, isError, totalRows, title } = this.props;\n\t\tconst classes = 'woocommerce-leaderboard';\n\n\t\tif ( isError ) {\n\t\t\treturn <ReportError className={ classes } isError />;\n\t\t}\n\n\t\tconst rows = this.getFormattedRows();\n\n\t\tif ( ! isRequesting && rows.length === 0 ) {\n\t\t\treturn (\n\t\t\t\t<Card title={ title } className={ classes }>\n\t\t\t\t\t<EmptyTable>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'No data recorded for the selected time period.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</EmptyTable>\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<TableCard\n\t\t\t\tclassName={ classes }\n\t\t\t\theaders={ this.getFormattedHeaders() }\n\t\t\t\tisLoading={ isRequesting }\n\t\t\t\trows={ rows }\n\t\t\t\trowsPerPage={ totalRows }\n\t\t\t\tshowMenu={ false }\n\t\t\t\ttitle={ title }\n\t\t\t\ttotalRows={ totalRows }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nLeaderboard.propTypes = {\n\t/**\n\t * An array of column headers.\n\t */\n\theaders: PropTypes.arrayOf(\n\t\tPropTypes.shape( {\n\t\t\tlabel: PropTypes.string,\n\t\t} )\n\t),\n\t/**\n\t * String of leaderboard ID to display.\n\t */\n\tid: PropTypes.string.isRequired,\n\t/**\n\t * Query args added to the report table endpoint request.\n\t */\n\tquery: PropTypes.object,\n\t/**\n\t * Which column should be the row header, defaults to the first item (`0`) (see `Table` props).\n\t */\n\trows: PropTypes.arrayOf(\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tdisplay: PropTypes.node,\n\t\t\t\tvalue: PropTypes.oneOfType( [\n\t\t\t\t\tPropTypes.string,\n\t\t\t\t\tPropTypes.number,\n\t\t\t\t\tPropTypes.bool,\n\t\t\t\t] ),\n\t\t\t} )\n\t\t)\n\t).isRequired,\n\t/**\n\t * String to display as the title of the table.\n\t */\n\ttitle: PropTypes.string.isRequired,\n\t/**\n\t * Number of table rows.\n\t */\n\ttotalRows: PropTypes.number.isRequired,\n};\n\nLeaderboard.defaultProps = {\n\trows: [],\n\tisError: false,\n\tisRequesting: false,\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { id, query, totalRows, filters } = props;\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\t\tconst filterQuery = getFilterQuery( { filters, query } );\n\n\t\tconst leaderboardQuery = {\n\t\t\tid,\n\t\t\tper_page: totalRows,\n\t\t\tpersisted_query: getPersistedQuery( query ),\n\t\t\tquery,\n\t\t\tselect,\n\t\t\tdefaultDateRange,\n\t\t\tfilterQuery,\n\t\t};\n\t\tconst leaderboardData = getLeaderboard( leaderboardQuery );\n\n\t\treturn leaderboardData;\n\t} )\n)( Leaderboard );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { SelectControl } from '@wordpress/components';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n\tSectionHeader,\n} from '@woocommerce/components';\nimport { useUserPreferences } from '@woocommerce/data';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport Leaderboard from 'analytics/components/leaderboard';\nimport withSelect from 'wc-api/with-select';\nimport { recordEvent } from 'lib/tracks';\nimport './style.scss';\n\nconst renderLeaderboardToggles = ( {\n\tallLeaderboards,\n\thiddenBlocks,\n\tonToggleHiddenBlock,\n} ) => {\n\treturn allLeaderboards.map( ( leaderboard ) => {\n\t\tconst checked = ! hiddenBlocks.includes( leaderboard.id );\n\t\treturn (\n\t\t\t<MenuItem\n\t\t\t\tchecked={ checked }\n\t\t\t\tisCheckbox\n\t\t\t\tisClickable\n\t\t\t\tkey={ leaderboard.id }\n\t\t\t\tonInvoke={ () => {\n\t\t\t\t\tonToggleHiddenBlock( leaderboard.id )();\n\t\t\t\t\trecordEvent( 'dash_leaderboards_toggle', {\n\t\t\t\t\t\tstatus: checked ? 'off' : 'on',\n\t\t\t\t\t\tkey: leaderboard.id,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ leaderboard.label }\n\t\t\t</MenuItem>\n\t\t);\n\t} );\n};\n\nconst renderLeaderboards = ( {\n\tallLeaderboards,\n\thiddenBlocks,\n\tquery,\n\trowsPerTable,\n\tfilters,\n} ) => {\n\treturn allLeaderboards.map( ( leaderboard ) => {\n\t\tif ( hiddenBlocks.includes( leaderboard.id ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn (\n\t\t\t<Leaderboard\n\t\t\t\theaders={ leaderboard.headers }\n\t\t\t\tid={ leaderboard.id }\n\t\t\t\tkey={ leaderboard.id }\n\t\t\t\tquery={ query }\n\t\t\t\ttitle={ leaderboard.label }\n\t\t\t\ttotalRows={ rowsPerTable }\n\t\t\t\tfilters={ filters }\n\t\t\t/>\n\t\t);\n\t} );\n};\n\nconst Leaderboards = ( props ) => {\n\tconst {\n\t\tallLeaderboards,\n\t\tcontrols: Controls,\n\t\tisFirst,\n\t\tisLast,\n\t\thiddenBlocks,\n\t\tonMove,\n\t\tonRemove,\n\t\tonTitleBlur,\n\t\tonTitleChange,\n\t\tonToggleHiddenBlock,\n\t\tquery,\n\t\ttitle,\n\t\ttitleInput,\n\t\tfilters,\n\t} = props;\n\tconst { updateUserPreferences, ...userPrefs } = useUserPreferences();\n\tconst [ rowsPerTable, setRowsPerTableState ] = useState(\n\t\tparseInt( userPrefs.dashboard_leaderboard_rows || 5, 10 )\n\t);\n\n\tconst setRowsPerTable = ( rows ) => {\n\t\tsetRowsPerTableState( parseInt( rows, 10 ) );\n\t\tconst userDataFields = {\n\t\t\tdashboard_leaderboard_rows: parseInt( rows, 10 ),\n\t\t};\n\t\tupdateUserPreferences( userDataFields );\n\t};\n\n\tconst renderMenu = () => (\n\t\t<EllipsisMenu\n\t\t\tlabel={ __(\n\t\t\t\t'Choose which leaderboards to display and other settings',\n\t\t\t\t'woocommerce-admin'\n\t\t\t) }\n\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t{ __( 'Leaderboards', 'woocommerce-admin' ) }\n\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t{ renderLeaderboardToggles( {\n\t\t\t\t\t\tallLeaderboards,\n\t\t\t\t\t\thiddenBlocks,\n\t\t\t\t\t\tonToggleHiddenBlock,\n\t\t\t\t\t} ) }\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tclassName=\"woocommerce-dashboard__dashboard-leaderboards__select\"\n\t\t\t\t\t\tlabel={ __( 'Rows Per Table', 'woocommerce-admin' ) }\n\t\t\t\t\t\tvalue={ rowsPerTable }\n\t\t\t\t\t\toptions={ Array.from( { length: 20 }, ( v, key ) => ( {\n\t\t\t\t\t\t\tv: key + 1,\n\t\t\t\t\t\t\tlabel: key + 1,\n\t\t\t\t\t\t} ) ) }\n\t\t\t\t\t\tonChange={ setRowsPerTable }\n\t\t\t\t\t/>\n\t\t\t\t\t{ window.wcAdminFeatures[\n\t\t\t\t\t\t'analytics-dashboard/customizable'\n\t\t\t\t\t] && (\n\t\t\t\t\t\t<Controls\n\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\tonMove={ onMove }\n\t\t\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\t\tonTitleBlur={ onTitleBlur }\n\t\t\t\t\t\t\tonTitleChange={ onTitleChange }\n\t\t\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t/>\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"woocommerce-dashboard__dashboard-leaderboards\">\n\t\t\t\t<SectionHeader\n\t\t\t\t\ttitle={ title || __( 'Leaderboards', 'woocommerce-admin' ) }\n\t\t\t\t\tmenu={ renderMenu() }\n\t\t\t\t/>\n\t\t\t\t<div className=\"woocommerce-dashboard__columns\">\n\t\t\t\t\t{ renderLeaderboards( {\n\t\t\t\t\t\tallLeaderboards,\n\t\t\t\t\t\thiddenBlocks,\n\t\t\t\t\t\tquery,\n\t\t\t\t\t\trowsPerTable,\n\t\t\t\t\t\tfilters,\n\t\t\t\t\t} ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n};\n\nLeaderboards.propTypes = {\n\tquery: PropTypes.object.isRequired,\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getItems, getItemsError, isGetItemsRequesting } = select(\n\t\t\t'wc-api'\n\t\t);\n\t\tconst { leaderboards: allLeaderboards } = getSetting( 'dataEndpoints', {\n\t\t\tleaderboards: [],\n\t\t} );\n\n\t\treturn {\n\t\t\tallLeaderboards,\n\t\t\tgetItems,\n\t\t\tgetItemsError,\n\t\t\tisGetItemsRequesting,\n\t\t};\n\t} )\n)( Leaderboards );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}