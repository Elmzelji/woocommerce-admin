{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/panels/stock/card.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/stock/index.js"],"names":["ProductStockCard","props","state","quantity","product","stock_quantity","editing","edited","beginEdit","bind","cancelEdit","onQuantityChange","handleKeyDown","onSubmit","eventName","eventProps","recordEvent","setState","quantityInput","focus","recordStockEvent","event","keyCode","ESCAPE","target","value","updateProductStock","__","input","sprintf","notifyLowStockAmount","getSetting","lowStockAmount","Number","isFinite","low_stock_amount","isLowStock","title","parent_id","id","name","subtitle","type","Object","values","attributes","map","attr","option","join","productImage","get","productImageClasses","classnames","src","icon","activityCardClasses","activityCard","getActions","getBody","Component","compose","withDispatch","dispatch","StockPanel","products","length","renderEmptyCard","isError","isRequesting","actionLabel","actionCallback","window","location","reload","renderProducts","propTypes","PropTypes","array","isRequired","bool","defaultProps","withSelect","select","getItems","getItemsError","isGetItemsRequesting","productsQuery","page","per_page","QUERY_DEFAULTS","pageSize","low_in_stock","status","Array","from","Boolean"],"mappings":"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","file":"chunks/activity-panels-stock.9209ff666c7d103e5d31.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { BaseControl, Button } from '@wordpress/components';\nimport classnames from 'classnames';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport { get } from 'lodash';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Link, ProductImage } from '@woocommerce/components';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard } from '../../activity-card';\nimport { recordEvent } from 'lib/tracks';\n\nclass ProductStockCard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tquantity: props.product.stock_quantity,\n\t\t\tediting: false,\n\t\t\tedited: false,\n\t\t};\n\n\t\tthis.beginEdit = this.beginEdit.bind( this );\n\t\tthis.cancelEdit = this.cancelEdit.bind( this );\n\t\tthis.onQuantityChange = this.onQuantityChange.bind( this );\n\t\tthis.handleKeyDown = this.handleKeyDown.bind( this );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t}\n\n\trecordStockEvent( eventName, eventProps = {} ) {\n\t\trecordEvent( `activity_panel_stock_${ eventName }`, eventProps );\n\t}\n\n\tbeginEdit() {\n\t\tconst { product } = this.props;\n\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tediting: true,\n\t\t\t\tquantity: product.stock_quantity,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif ( this.quantityInput ) {\n\t\t\t\t\tthis.quantityInput.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tthis.recordStockEvent( 'update_stock' );\n\t}\n\n\tcancelEdit() {\n\t\tconst { product } = this.props;\n\n\t\tthis.setState( {\n\t\t\tediting: false,\n\t\t\tquantity: product.stock_quantity,\n\t\t} );\n\t\tthis.recordStockEvent( 'cancel' );\n\t}\n\n\thandleKeyDown( event ) {\n\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\tonQuantityChange( event ) {\n\t\tthis.setState( { quantity: event.target.value } );\n\t}\n\n\tonSubmit() {\n\t\tconst { product, updateProductStock } = this.props;\n\t\tconst { quantity } = this.state;\n\n\t\tthis.setState( { editing: false, edited: true } );\n\n\t\tupdateProductStock( product, quantity );\n\t\tthis.recordStockEvent( 'save', {\n\t\t\tquantity,\n\t\t} );\n\t}\n\n\tgetActions() {\n\t\tconst { editing } = this.state;\n\n\t\tif ( editing ) {\n\t\t\treturn [\n\t\t\t\t<Button key=\"save\" type=\"submit\" isPrimary>\n\t\t\t\t\t{ __( 'Save', 'woocommerce-admin' ) }\n\t\t\t\t</Button>,\n\t\t\t\t<Button key=\"cancel\" type=\"reset\">\n\t\t\t\t\t{ __( 'Cancel', 'woocommerce-admin' ) }\n\t\t\t\t</Button>,\n\t\t\t];\n\t\t}\n\n\t\treturn [\n\t\t\t<Button key=\"update\" isSecondary onClick={ this.beginEdit }>\n\t\t\t\t{ __( 'Update stock', 'woocommerce-admin' ) }\n\t\t\t</Button>,\n\t\t];\n\t}\n\n\tgetBody() {\n\t\tconst { product } = this.props;\n\t\tconst { editing, quantity } = this.state;\n\n\t\tif ( editing ) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BaseControl className=\"woocommerce-stock-activity-card__edit-quantity\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"components-text-control__input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tvalue={ quantity }\n\t\t\t\t\t\t\tonKeyDown={ this.handleKeyDown }\n\t\t\t\t\t\t\tonChange={ this.onQuantityChange }\n\t\t\t\t\t\t\tref={ ( input ) => {\n\t\t\t\t\t\t\t\tthis.quantityInput = input;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t\t<span>{ __( 'in stock', 'woocommerce-admin' ) }</span>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<span className=\"woocommerce-stock-activity-card__stock-quantity\">\n\t\t\t\t{ sprintf(\n\t\t\t\t\t__( '%d in stock', 'woocommerce-admin' ),\n\t\t\t\t\tproduct.stock_quantity\n\t\t\t\t) }\n\t\t\t</span>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { product } = this.props;\n\t\tconst { edited, editing } = this.state;\n\t\tconst notifyLowStockAmount = getSetting( 'notifyLowStockAmount', 0 );\n\t\tconst lowStockAmount = Number.isFinite( product.low_stock_amount )\n\t\t\t? product.low_stock_amount\n\t\t\t: notifyLowStockAmount;\n\t\tconst isLowStock = product.stock_quantity <= lowStockAmount;\n\n\t\t// Hide cards that are not in low stock and have not been edited.\n\t\t// This allows clearing cards which are no longer in low stock after\n\t\t// closing & opening the panel without having to make another request.\n\t\tif ( ! isLowStock && ! edited ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'post.php?action=edit&post=' +\n\t\t\t\t\t( product.parent_id || product.id )\n\t\t\t\t}\n\t\t\t\tonClick={ () => this.recordStockEvent( 'product_name' ) }\n\t\t\t\ttype=\"wp-admin\"\n\t\t\t>\n\t\t\t\t{ product.name }\n\t\t\t</Link>\n\t\t);\n\t\tlet subtitle = null;\n\n\t\tif ( product.type === 'variation' ) {\n\t\t\tsubtitle = Object.values( product.attributes )\n\t\t\t\t.map( ( attr ) => attr.option )\n\t\t\t\t.join( ', ' );\n\t\t}\n\n\t\tconst productImage =\n\t\t\tget( product, [ 'images', 0 ] ) || get( product, [ 'image' ] );\n\t\tconst productImageClasses = classnames(\n\t\t\t'woocommerce-stock-activity-card__image-overlay__product',\n\t\t\t{\n\t\t\t\t'is-placeholder': ! productImage || ! productImage.src,\n\t\t\t}\n\t\t);\n\t\tconst icon = (\n\t\t\t<div className=\"woocommerce-stock-activity-card__image-overlay\">\n\t\t\t\t<div className={ productImageClasses }>\n\t\t\t\t\t<ProductImage product={ product } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t\tconst activityCardClasses = classnames(\n\t\t\t'woocommerce-stock-activity-card',\n\t\t\t{\n\t\t\t\t'is-dimmed': ! editing && ! isLowStock,\n\t\t\t}\n\t\t);\n\n\t\tconst activityCard = (\n\t\t\t<ActivityCard\n\t\t\t\tclassName={ activityCardClasses }\n\t\t\t\ttitle={ title }\n\t\t\t\tsubtitle={ subtitle }\n\t\t\t\ticon={ icon }\n\t\t\t\tactions={ this.getActions() }\n\t\t\t>\n\t\t\t\t{ this.getBody() }\n\t\t\t</ActivityCard>\n\t\t);\n\n\t\tif ( editing ) {\n\t\t\treturn (\n\t\t\t\t<form onReset={ this.cancelEdit } onSubmit={ this.onSubmit }>\n\t\t\t\t\t{ activityCard }\n\t\t\t\t</form>\n\t\t\t);\n\t\t}\n\n\t\treturn activityCard;\n\t}\n}\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateProductStock } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tupdateProductStock,\n\t\t};\n\t} )\n)( ProductStockCard );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { EmptyContent, Section } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard, ActivityCardPlaceholder } from '../../activity-card';\nimport ActivityHeader from '../../activity-header';\nimport Gridicon from 'gridicons';\nimport ProductStockCard from './card';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\n\nclass StockPanel extends Component {\n\trenderEmptyCard() {\n\t\treturn (\n\t\t\t<ActivityCard\n\t\t\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'Your stock is in good shape.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\ticon={ <Gridicon icon=\"checkmark\" size={ 48 } /> }\n\t\t\t>\n\t\t\t\t{ __(\n\t\t\t\t\t'You currently have no products running low on stock.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t</ActivityCard>\n\t\t);\n\t}\n\n\trenderProducts() {\n\t\tconst { products } = this.props;\n\n\t\tif ( products.length === 0 ) {\n\t\t\treturn this.renderEmptyCard();\n\t\t}\n\n\t\treturn products.map( ( product ) => (\n\t\t\t<ProductStockCard key={ product.id } product={ product } />\n\t\t) );\n\t}\n\n\trender() {\n\t\tconst { isError, isRequesting, products } = this.props;\n\n\t\tif ( isError ) {\n\t\t\tconst title = __(\n\t\t\t\t'There was an error getting your low stock products. Please try again.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\t\tconst actionCallback = () => {\n\t\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\t\twindow.location.reload();\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<EmptyContent\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\t\tactionURL={ null }\n\t\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\tconst title =\n\t\t\tisRequesting || products.length > 0\n\t\t\t\t? __( 'Stock', 'woocommerce-admin' )\n\t\t\t\t: __( 'No products with low stock', 'woocommerce-admin' );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ActivityHeader title={ title } />\n\t\t\t\t<Section>\n\t\t\t\t\t{ isRequesting ? (\n\t\t\t\t\t\t<ActivityCardPlaceholder\n\t\t\t\t\t\t\tclassName=\"woocommerce-stock-activity-card\"\n\t\t\t\t\t\t\thasAction\n\t\t\t\t\t\t\tlines={ 1 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tthis.renderProducts()\n\t\t\t\t\t) }\n\t\t\t\t</Section>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nStockPanel.propTypes = {\n\tproducts: PropTypes.array.isRequired,\n\tisError: PropTypes.bool,\n\tisRequesting: PropTypes.bool,\n};\n\nStockPanel.defaultProps = {\n\tproducts: [],\n\tisError: false,\n\tisRequesting: false,\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getItems, getItemsError, isGetItemsRequesting } = select(\n\t\t\t'wc-api'\n\t\t);\n\n\t\tconst productsQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\tlow_in_stock: true,\n\t\t\tstatus: 'publish',\n\t\t};\n\n\t\tconst products = Array.from(\n\t\t\tgetItems( 'products', productsQuery ).values()\n\t\t);\n\t\tconst isError = Boolean( getItemsError( 'products', productsQuery ) );\n\t\tconst isRequesting = isGetItemsRequesting( 'products', productsQuery );\n\n\t\treturn { products, isError, isRequesting };\n\t} )\n)( StockPanel );\n"],"sourceRoot":""}