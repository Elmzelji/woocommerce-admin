{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/components/connect/index.js","webpack://wc.[modulename]/./client/dashboard/components/settings/general/store-address.js","webpack://wc.[modulename]/./client/lib/notices/index.js"],"names":["Connect","props","connectJetpack","bind","setIsPending","autoConnect","jetpackConnectUrl","prevProps","createNotice","error","isRequesting","onError","onConnect","window","location","hasErrors","onSkip","skipText","reload","__","Component","propTypes","PropTypes","bool","func","isRequired","string","redirectUrl","defaultProps","compose","withSelect","select","PLUGINS_STORE_NAME","getJetpackConnectUrl","isPluginsRequesting","getPluginsError","queryArgs","redirect_url","href","withDispatch","dispatch","getSetting","countries","validateStoreAddress","values","errors","addressLine1","length","countryState","city","postCode","getCountryStateOptions","countryStateOptions","reduce","acc","country","states","push","key","code","label","decodeEntities","name","countryStates","map","state","useGetCountryStateAutofill","options","setValue","useState","autofillCountry","setAutofillCountry","autofillState","setAutofillState","useEffect","filteredOptions","countrySearch","RegExp","escapeRegExp","filter","option","test","stateSearch","replace","countryKeyOptions","stateKeyOptions","event","target","value","StoreAddress","getInputProps","useMemo","countryStateAutofill","className","createNoticesFromResponse","response","error_data","Object","keys","forEach","errorKey","join","message"],"mappings":"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","file":"chunks/profile-wizard~task-list.789f71fba4b389555d06.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\nclass Connect extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.connectJetpack = this.connectJetpack.bind( this );\n\t\tprops.setIsPending( true );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { autoConnect, jetpackConnectUrl } = this.props;\n\n\t\tif ( autoConnect && jetpackConnectUrl ) {\n\t\t\tthis.connectJetpack();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tautoConnect,\n\t\t\tcreateNotice,\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tjetpackConnectUrl,\n\t\t\tonError,\n\t\t\tsetIsPending,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isRequesting && ! isRequesting ) {\n\t\t\tsetIsPending( false );\n\t\t}\n\n\t\tif ( error && error !== prevProps.error ) {\n\t\t\tif ( onError ) {\n\t\t\t\tonError();\n\t\t\t}\n\t\t\tcreateNotice( 'error', error );\n\t\t}\n\n\t\tif ( autoConnect && jetpackConnectUrl ) {\n\t\t\tthis.connectJetpack();\n\t\t}\n\t}\n\n\tasync connectJetpack() {\n\t\tconst { jetpackConnectUrl, onConnect } = this.props;\n\n\t\tif ( onConnect ) {\n\t\t\tonConnect();\n\t\t}\n\t\twindow.location = jetpackConnectUrl;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tautoConnect,\n\t\t\thasErrors,\n\t\t\tisRequesting,\n\t\t\tonSkip,\n\t\t\tskipText,\n\t\t} = this.props;\n\n\t\tif ( autoConnect ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ hasErrors ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ () => window.location.reload() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Retry', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ isRequesting }\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ this.connectJetpack }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ onSkip && (\n\t\t\t\t\t<Button onClick={ onSkip }>\n\t\t\t\t\t\t{ skipText || __( 'No thanks', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nConnect.propTypes = {\n\t/**\n\t * If connection should happen automatically, or requires user confirmation.\n\t */\n\tautoConnect: PropTypes.bool,\n\t/**\n\t * Method to create a displayed notice.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Human readable error message.\n\t */\n\terror: PropTypes.string,\n\t/**\n\t * Bool to determine if the \"Retry\" button should be displayed.\n\t */\n\thasErrors: PropTypes.bool,\n\t/**\n\t * Bool to check if the connection URL is still being requested.\n\t */\n\tisRequesting: PropTypes.bool,\n\t/**\n\t * Generated Jetpack connection URL.\n\t */\n\tjetpackConnectUrl: PropTypes.string,\n\t/**\n\t * Called before the redirect to Jetpack.\n\t */\n\tonConnect: PropTypes.func,\n\t/**\n\t * Called when the plugin has an error retrieving the jetpackConnectUrl.\n\t */\n\tonError: PropTypes.func,\n\t/**\n\t * Called when the plugin connection is skipped.\n\t */\n\tonSkip: PropTypes.func,\n\t/**\n\t * Redirect URL to encode as a URL param for the connection path.\n\t */\n\tredirectUrl: PropTypes.string,\n\t/**\n\t * Text used for the skip connection button.\n\t */\n\tskipText: PropTypes.string,\n\t/**\n\t * Control the `isPending` logic of the parent containing the Stepper.\n\t */\n\tsetIsPending: PropTypes.func,\n};\n\nConnect.defaultProps = {\n\tautoConnect: false,\n\tsetIsPending: () => {},\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tgetJetpackConnectUrl,\n\t\t\tisPluginsRequesting,\n\t\t\tgetPluginsError,\n\t\t} = select( PLUGINS_STORE_NAME );\n\n\t\tconst queryArgs = {\n\t\t\tredirect_url: props.redirectUrl || window.location.href,\n\t\t};\n\t\tconst isRequesting = isPluginsRequesting( 'getJetpackConnectUrl' );\n\t\tconst error = getPluginsError( 'getJetpackConnectUrl' ) || '';\n\t\tconst jetpackConnectUrl = getJetpackConnectUrl( queryArgs );\n\n\t\treturn {\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tjetpackConnectUrl,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t};\n\t} )\n)( Connect );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { escapeRegExp } from 'lodash';\nimport { Fragment } from '@wordpress/element';\nimport { useEffect, useMemo, useState } from 'react';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { SelectControl, TextControl } from '@woocommerce/components';\n\nconst { countries } = getSetting( 'dataEndpoints', { countries: {} } );\n/**\n * Form validation.\n *\n * @param {Object} values Keyed values of all fields in the form.\n * @return {Object} Key value of fields and error messages, { myField: 'This field is required' }\n */\nexport function validateStoreAddress( values ) {\n\tconst errors = {};\n\n\tif ( ! values.addressLine1.length ) {\n\t\terrors.addressLine1 = __(\n\t\t\t'Please add an address',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.countryState.length ) {\n\t\terrors.countryState = __(\n\t\t\t'Please select a country / region',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.city.length ) {\n\t\terrors.city = __( 'Please add a city', 'woocommerce-admin' );\n\t}\n\tif ( ! values.postCode.length ) {\n\t\terrors.postCode = __( 'Please add a post code', 'woocommerce-admin' );\n\t}\n\n\treturn errors;\n}\n\n/**\n * Get all country and state combinations used for select dropdowns.\n *\n * @return {Object} Select options, { value: 'US:GA', label: 'United States - Georgia' }\n */\nexport function getCountryStateOptions() {\n\tconst countryStateOptions = countries.reduce( ( acc, country ) => {\n\t\tif ( ! country.states.length ) {\n\t\t\tacc.push( {\n\t\t\t\tkey: country.code,\n\t\t\t\tlabel: decodeEntities( country.name ),\n\t\t\t} );\n\n\t\t\treturn acc;\n\t\t}\n\n\t\tconst countryStates = country.states.map( ( state ) => {\n\t\t\treturn {\n\t\t\t\tkey: country.code + ':' + state.code,\n\t\t\t\tlabel:\n\t\t\t\t\tdecodeEntities( country.name ) +\n\t\t\t\t\t' — ' +\n\t\t\t\t\tdecodeEntities( state.name ),\n\t\t\t};\n\t\t} );\n\n\t\tacc.push( ...countryStates );\n\n\t\treturn acc;\n\t}, [] );\n\n\treturn countryStateOptions;\n}\n\n/**\n * Get the autofill countryState fields and set value from filtered options.\n *\n * @param {Array} options Array of filterable options.\n * @param {string} countryState The value of the countryState field.\n * @param {Function} setValue Set value of the countryState input.\n * @return {Object} React component.\n */\nexport function useGetCountryStateAutofill( options, countryState, setValue ) {\n\tconst [ autofillCountry, setAutofillCountry ] = useState( '' );\n\tconst [ autofillState, setAutofillState ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tlet filteredOptions = [];\n\t\tconst countrySearch = new RegExp(\n\t\t\tescapeRegExp( autofillCountry ),\n\t\t\t'i'\n\t\t);\n\t\tif ( autofillState.length || autofillCountry.length ) {\n\t\t\tfilteredOptions = options.filter( ( option ) =>\n\t\t\t\tcountrySearch.test( option.label )\n\t\t\t);\n\t\t}\n\t\tif ( autofillCountry.length && autofillState.length ) {\n\t\t\tconst stateSearch = new RegExp(\n\t\t\t\tescapeRegExp( autofillState.replace( /\\s/g, '' ) ),\n\t\t\t\t'i'\n\t\t\t);\n\t\t\tfilteredOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\tstateSearch.test(\n\t\t\t\t\toption.label.replace( '-', '' ).replace( /\\s/g, '' )\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet countryKeyOptions = [];\n\t\t\t\tcountryKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tcountrySearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( countryKeyOptions.length > 0 ) {\n\t\t\t\t\tfilteredOptions = countryKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet stateKeyOptions = [];\n\t\t\t\tstateKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tstateSearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( stateKeyOptions.length === 1 ) {\n\t\t\t\t\tfilteredOptions = stateKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tfilteredOptions.length === 1 &&\n\t\t\tcountryState !== filteredOptions[ 0 ].key\n\t\t) {\n\t\t\tsetValue( 'countryState', filteredOptions[ 0 ].key );\n\t\t}\n\t}, [ autofillCountry, autofillState ] );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) =>\n\t\t\t\t\tsetAutofillCountry( event.target.value )\n\t\t\t\t}\n\t\t\t\tvalue={ autofillCountry }\n\t\t\t\tname=\"country\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"country\"\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) => setAutofillState( event.target.value ) }\n\t\t\t\tvalue={ autofillState }\n\t\t\t\tname=\"state\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"address-level1\"\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\n/**\n * Store address fields.\n *\n * @param {Object} props Props for input components.\n * @return {Object} -\n */\nexport function StoreAddress( props ) {\n\tconst { getInputProps, setValue } = props;\n\tconst countryStateOptions = useMemo( () => getCountryStateOptions(), [] );\n\tconst countryStateAutofill = useGetCountryStateAutofill(\n\t\tcountryStateOptions,\n\t\tgetInputProps( 'countryState' ).value,\n\t\tsetValue\n\t);\n\n\treturn (\n\t\t<div className=\"woocommerce-store-address-fields\">\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 1', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line1\"\n\t\t\t\t{ ...getInputProps( 'addressLine1' ) }\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 2 (optional)', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line2\"\n\t\t\t\t{ ...getInputProps( 'addressLine2' ) }\n\t\t\t/>\n\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Country / Region', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\toptions={ countryStateOptions }\n\t\t\t\texcludeSelectedOptions={ false }\n\t\t\t\tshowAllOnFocus\n\t\t\t\tisSearchable\n\t\t\t\t{ ...getInputProps( 'countryState' ) }\n\t\t\t\tcontrolClassName={ getInputProps( 'countryState' ).className }\n\t\t\t>\n\t\t\t\t{ countryStateAutofill }\n\t\t\t</SelectControl>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'City', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\t{ ...getInputProps( 'city' ) }\n\t\t\t\tautoComplete=\"address-level2\"\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Post code', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"postal-code\"\n\t\t\t\t{ ...getInputProps( 'postCode' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { dispatch } from '@wordpress/data';\n\nexport function createNoticesFromResponse( response ) {\n\tconst { createNotice } = dispatch( 'core/notices' );\n\n\tif ( response.error_data && response.errors && Object.keys( response.errors ).length ) {\n\t\t// Loop over multi-error responses.\n\t\tObject.keys( response.errors ).forEach( errorKey => {\n\t\t\tcreateNotice( 'error', response.errors[ errorKey ].join( ' ' ) );\n\t\t} );\n\t} else if ( response.message ) {\n\t\t// Handle generic messages.\n\t\tcreateNotice( response.code ? 'error' : 'success', response.message );\n\t}\n}"],"sourceRoot":""}