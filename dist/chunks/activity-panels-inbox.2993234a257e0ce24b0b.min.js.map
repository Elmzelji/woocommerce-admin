{"version":3,"sources":["webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/action.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/card.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/inbox/index.js","webpack://wc.[modulename]/./client/header/activity-panel/panels/reviews.js","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["InboxNoteAction","props","state","inAction","handleActionClick","bind","event","action","noteId","triggerNoteAction","href","target","length","startsWith","adminUrl","preventDefault","window","open","setState","id","primary","url","undefined","label","Component","propTypes","PropTypes","number","shape","isRequired","string","bool","compose","withDispatch","dispatch","InboxNoteCard","onVisible","hasBeenSeen","isVisible","note","recordEvent","note_content","content","note_name","name","note_title","title","note_type","type","note_icon","icon","lastRead","getButtonsFromActions","actions","map","classnames","actioned","status","date_created","date_created_gmt","Date","getTime","sanitizeHTML","arrayOf","InboxPanel","mountTime","now","userDataFields","activity_panel_inbox_last_read","updateCurrentUserData","__","notes","Object","keys","renderEmptyCard","notesArray","key","isError","isRequesting","actionLabel","actionCallback","location","reload","renderNotes","withSelect","select","getCurrentUserData","getNotes","getNotesError","isGetNotesRequesting","userData","inboxQuery","page","per_page","QUERY_DEFAULTS","pageSize","orderby","order","_fields","Boolean","ReviewsPanel","review","product","_embedded","up","isNull","interpolateComponents","mixedString","sprintf","reviewer","components","productLink","permalink","authorLink","reviewer_email","subtitle","verified","productImage","get","productImageClasses","src","manageReviewEvent","date","cardActions","getAdminLink","lastApprovedReviewTime","buttonUrl","buttonTarget","buttonText","DAY","reviews","renderReview","renderEmptyMessage","array","defaultProps","hasUnapprovedReviews","getReviews","getReviewsError","isGetReviewsRequesting","reviewsQuery","_embed","approvedReviewsQuery","approvedReviews","lastApprovedReview","creationDate","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/activity-panels-inbox.2993234a257e0ce24b0b.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\n\nclass InboxNoteAction extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tinAction: false,\n\t\t};\n\n\t\tthis.handleActionClick = this.handleActionClick.bind( this );\n\t}\n\n\thandleActionClick( event ) {\n\t\tconst { action, noteId, triggerNoteAction } = this.props;\n\t\tconst href = event.target.href || '';\n\t\tlet inAction = true;\n\n\t\tif ( href.length && ! href.startsWith( adminUrl ) ) {\n\t\t\tevent.preventDefault();\n\t\t\tinAction = false; // link buttons shouldn't be \"busy\".\n\t\t\twindow.open( href, '_blank' );\n\t\t}\n\n\t\tthis.setState( { inAction }, () =>\n\t\t\ttriggerNoteAction( noteId, action.id )\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { action } = this.props;\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tisDefault\n\t\t\t\tisPrimary={ action.primary }\n\t\t\t\tisBusy={ this.state.inAction }\n\t\t\t\tdisabled={ this.state.inAction }\n\t\t\t\thref={ action.url || undefined }\n\t\t\t\tonClick={ this.handleActionClick }\n\t\t\t>\n\t\t\t\t{ action.label }\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nInboxNoteAction.propTypes = {\n\tnoteId: PropTypes.number,\n\taction: PropTypes.shape( {\n\t\tid: PropTypes.number.isRequired,\n\t\turl: PropTypes.string,\n\t\tlabel: PropTypes.string.isRequired,\n\t\tprimary: PropTypes.bool.isRequired,\n\t} ),\n};\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { triggerNoteAction } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\ttriggerNoteAction,\n\t\t};\n\t} )\n)( InboxNoteAction );\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\nimport Gridicon from 'gridicons';\nimport VisibilitySensor from 'react-visibility-sensor';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard } from '../../activity-card';\nimport NoteAction from './action';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport classnames from 'classnames';\nimport { recordEvent } from 'lib/tracks';\n\nclass InboxNoteCard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onVisible = this.onVisible.bind( this );\n\t\tthis.hasBeenSeen = false;\n\t}\n\n\t// Trigger a view Tracks event when the note is seen.\n\tonVisible( isVisible ) {\n\t\tif ( isVisible && ! this.hasBeenSeen ) {\n\t\t\tconst { note } = this.props;\n\n\t\t\trecordEvent( 'inbox_note_view', {\n\t\t\t\tnote_content: note.content,\n\t\t\t\tnote_name: note.name,\n\t\t\t\tnote_title: note.title,\n\t\t\t\tnote_type: note.type,\n\t\t\t\tnote_icon: note.icon,\n\t\t\t} );\n\n\t\t\tthis.hasBeenSeen = true;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { lastRead, note } = this.props;\n\n\t\tconst getButtonsFromActions = () => {\n\t\t\tif ( ! note.actions ) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn note.actions.map( ( action ) => (\n\t\t\t\t<NoteAction key={ note.id } noteId={ note.id } action={ action } />\n\t\t\t) );\n\t\t};\n\n\t\treturn (\n\t\t\t<VisibilitySensor onChange={ this.onVisible }>\n\t\t\t\t<ActivityCard\n\t\t\t\t\tclassName={ classnames( 'woocommerce-inbox-activity-card', {\n\t\t\t\t\t\tactioned: note.status !== 'unactioned',\n\t\t\t\t\t} ) }\n\t\t\t\t\ttitle={ note.title }\n\t\t\t\t\tdate={ note.date_created }\n\t\t\t\t\ticon={ <Gridicon icon={ note.icon } size={ 48 } /> }\n\t\t\t\t\tunread={\n\t\t\t\t\t\t! lastRead ||\n\t\t\t\t\t\t! note.date_created_gmt ||\n\t\t\t\t\t\tnew Date( note.date_created_gmt + 'Z' ).getTime() >\n\t\t\t\t\t\t\tlastRead\n\t\t\t\t\t}\n\t\t\t\t\tactions={ getButtonsFromActions( note ) }\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML( note.content ) }\n\t\t\t\t\t/>\n\t\t\t\t</ActivityCard>\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n}\n\nInboxNoteCard.propTypes = {\n\tnote: PropTypes.shape( {\n\t\tid: PropTypes.number,\n\t\tstatus: PropTypes.string,\n\t\ttitle: PropTypes.string,\n\t\ticon: PropTypes.string,\n\t\tcontent: PropTypes.string,\n\t\tdate_created: PropTypes.string,\n\t\tdate_created_gmt: PropTypes.string,\n\t\tactions: PropTypes.arrayOf(\n\t\t\tPropTypes.shape( {\n\t\t\t\tid: PropTypes.number.isRequired,\n\t\t\t\turl: PropTypes.string,\n\t\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\t\tprimary: PropTypes.bool.isRequired,\n\t\t\t} )\n\t\t),\n\t} ),\n\tlastRead: PropTypes.number,\n};\n\nexport default InboxNoteCard;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport Gridicon from 'gridicons';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard, ActivityCardPlaceholder } from '../../activity-card';\nimport ActivityHeader from '../../activity-header';\nimport InboxNoteCard from './card';\nimport { EmptyContent, Section } from '@woocommerce/components';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\n\nclass InboxPanel extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.mountTime = Date.now();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tconst userDataFields = {\n\t\t\tactivity_panel_inbox_last_read: this.mountTime,\n\t\t};\n\t\tthis.props.updateCurrentUserData( userDataFields );\n\t}\n\n\trenderEmptyCard() {\n\t\treturn (\n\t\t\t<ActivityCard\n\t\t\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\t\t\ttitle={ __( 'Your inbox is empty', 'woocommerce-admin' ) }\n\t\t\t\ticon={ <Gridicon icon=\"checkmark\" size={ 48 } /> }\n\t\t\t>\n\t\t\t\t{ __(\n\t\t\t\t\t'As things begin to happen in your store your inbox will start to fill up. ' +\n\t\t\t\t\t\t\"You'll see things like achievements, new feature announcements, extension recommendations and more!\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t</ActivityCard>\n\t\t);\n\t}\n\n\trenderNotes() {\n\t\tconst { lastRead, notes } = this.props;\n\n\t\tif ( Object.keys( notes ).length === 0 ) {\n\t\t\treturn this.renderEmptyCard();\n\t\t}\n\n\t\tconst notesArray = Object.keys( notes ).map( ( key ) => notes[ key ] );\n\n\t\treturn notesArray.map( ( note ) => (\n\t\t\t<InboxNoteCard\n\t\t\t\tkey={ note.id }\n\t\t\t\tnote={ note }\n\t\t\t\tlastRead={ lastRead }\n\t\t\t/>\n\t\t) );\n\t}\n\n\trender() {\n\t\tconst { isError, isRequesting } = this.props;\n\n\t\tif ( isError ) {\n\t\t\tconst title = __(\n\t\t\t\t'There was an error getting your inbox. Please try again.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\t\tconst actionCallback = () => {\n\t\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\t\twindow.location.reload();\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<EmptyContent\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\t\tactionURL={ null }\n\t\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ActivityHeader title={ __( 'Inbox', 'woocommerce-admin' ) } />\n\t\t\t\t<Section>\n\t\t\t\t\t{ isRequesting ? (\n\t\t\t\t\t\t<ActivityCardPlaceholder\n\t\t\t\t\t\t\tclassName=\"woocommerce-inbox-activity-card\"\n\t\t\t\t\t\t\thasAction\n\t\t\t\t\t\t\thasDate\n\t\t\t\t\t\t\tlines={ 2 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tthis.renderNotes()\n\t\t\t\t\t) }\n\t\t\t\t</Section>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetCurrentUserData,\n\t\t\tgetNotes,\n\t\t\tgetNotesError,\n\t\t\tisGetNotesRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst userData = getCurrentUserData();\n\t\tconst inboxQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\ttype: 'info,warning',\n\t\t\torderby: 'date',\n\t\t\torder: 'desc',\n\t\t\tstatus: 'unactioned',\n\t\t\t_fields: [\n\t\t\t\t'id',\n\t\t\t\t'name',\n\t\t\t\t'title',\n\t\t\t\t'content',\n\t\t\t\t'type',\n\t\t\t\t'icon',\n\t\t\t\t'status',\n\t\t\t\t'actions',\n\t\t\t\t'date_created',\n\t\t\t\t'date_created_gmt',\n\t\t\t],\n\t\t};\n\n\t\tconst notes = getNotes( inboxQuery );\n\t\tconst isError = Boolean( getNotesError( inboxQuery ) );\n\t\tconst isRequesting = isGetNotesRequesting( inboxQuery );\n\n\t\treturn {\n\t\t\tnotes,\n\t\t\tisError,\n\t\t\tisRequesting,\n\t\t\tlastRead: userData.activity_panel_inbox_last_read,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateCurrentUserData } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tupdateCurrentUserData,\n\t\t};\n\t} )\n)( InboxPanel );\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport classnames from 'classnames';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport Gridicon from 'gridicons';\nimport interpolateComponents from 'interpolate-components';\nimport { get, isNull } from 'lodash';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tEmptyContent,\n\tGravatar,\n\tLink,\n\tProductImage,\n\tReviewRating,\n\tSection,\n} from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { ActivityCard, ActivityCardPlaceholder } from '../activity-card';\nimport ActivityHeader from '../activity-header';\nimport { QUERY_DEFAULTS } from 'wc-api/constants';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport withSelect from 'wc-api/with-select';\nimport { recordEvent } from 'lib/tracks';\n\nclass ReviewsPanel extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.mountTime = new Date().getTime();\n\t}\n\n\trenderReview( review, props ) {\n\t\tconst { lastRead } = props;\n\t\tconst product =\n\t\t\t( review &&\n\t\t\t\treview._embedded &&\n\t\t\t\treview._embedded.up &&\n\t\t\t\treview._embedded.up[ 0 ] ) ||\n\t\t\tnull;\n\n\t\tif ( isNull( product ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = interpolateComponents( {\n\t\t\tmixedString: sprintf(\n\t\t\t\t__(\n\t\t\t\t\t'{{productLink}}%s{{/productLink}} reviewed by {{authorLink}}%s{{/authorLink}}',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tproduct.name,\n\t\t\t\treview.reviewer\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tproductLink: (\n\t\t\t\t\t<Link href={ product.permalink } type=\"external\" />\n\t\t\t\t),\n\t\t\t\tauthorLink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref={ 'mailto:' + review.reviewer_email }\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t} );\n\n\t\tconst subtitle = (\n\t\t\t<Fragment>\n\t\t\t\t<ReviewRating review={ review } />\n\t\t\t\t{ review.verified && (\n\t\t\t\t\t<span className=\"woocommerce-review-activity-card__verified\">\n\t\t\t\t\t\t<Gridicon icon=\"checkmark\" size={ 18 } />\n\t\t\t\t\t\t{ __( 'Verified customer', 'woocommerce-admin' ) }\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\n\t\tconst productImage =\n\t\t\tget( product, [ 'images', 0 ] ) || get( product, [ 'image' ] );\n\t\tconst productImageClasses = classnames(\n\t\t\t'woocommerce-review-activity-card__image-overlay__product',\n\t\t\t{\n\t\t\t\t'is-placeholder': ! productImage || ! productImage.src,\n\t\t\t}\n\t\t);\n\t\tconst icon = (\n\t\t\t<div className=\"woocommerce-review-activity-card__image-overlay\">\n\t\t\t\t<Gravatar user={ review.reviewer_email } size={ 24 } />\n\t\t\t\t<div className={ productImageClasses }>\n\t\t\t\t\t<ProductImage product={ product } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\t\tconst manageReviewEvent = {\n\t\t\tdate: review.date_created_gmt,\n\t\t\tstatus: review.status,\n\t\t};\n\n\t\tconst cardActions = (\n\t\t\t<Button\n\t\t\t\tisDefault\n\t\t\t\tonClick={ () =>\n\t\t\t\t\trecordEvent( 'review_manage_click', manageReviewEvent )\n\t\t\t\t}\n\t\t\t\thref={ getAdminLink(\n\t\t\t\t\t'comment.php?action=editcomment&c=' + review.id\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t{ __( 'Manage', 'woocommerce-admin' ) }\n\t\t\t</Button>\n\t\t);\n\n\t\treturn (\n\t\t\t<ActivityCard\n\t\t\t\tclassName=\"woocommerce-review-activity-card\"\n\t\t\t\tkey={ review.id }\n\t\t\t\ttitle={ title }\n\t\t\t\tsubtitle={ subtitle }\n\t\t\t\tdate={ review.date_created_gmt }\n\t\t\t\ticon={ icon }\n\t\t\t\tactions={ cardActions }\n\t\t\t\tunread={\n\t\t\t\t\treview.status === 'hold' ||\n\t\t\t\t\t! lastRead ||\n\t\t\t\t\t! review.date_created_gmt ||\n\t\t\t\t\tnew Date( review.date_created_gmt + 'Z' ).getTime() >\n\t\t\t\t\t\tlastRead\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<span\n\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML( review.review ) }\n\t\t\t\t/>\n\t\t\t</ActivityCard>\n\t\t);\n\t}\n\n\trenderEmptyMessage() {\n\t\tconst { lastApprovedReviewTime } = this.props;\n\n\t\tconst title = __(\n\t\t\t'You have no reviews to moderate',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t\tlet buttonUrl = '';\n\t\tlet buttonTarget = '';\n\t\tlet buttonText = '';\n\t\tlet content = '';\n\n\t\tif ( lastApprovedReviewTime ) {\n\t\t\tconst now = new Date();\n\t\t\tconst DAY = 24 * 60 * 60 * 1000;\n\t\t\tif ( ( now.getTime() - lastApprovedReviewTime ) / DAY > 30 ) {\n\t\t\t\tbuttonUrl =\n\t\t\t\t\t'https://woocommerce.com/posts/reviews-woocommerce-best-practices/';\n\t\t\t\tbuttonTarget = '_blank';\n\t\t\t\tbuttonText = __( 'Learn more', 'woocommerce-admin' );\n\t\t\t\tcontent = (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\"We noticed that it's been a while since your products had any reviews.\",\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Take some time to learn about best practices for collecting and using your reviews.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tbuttonUrl = getAdminLink(\n\t\t\t\t\t'edit-comments.php?comment_type=review'\n\t\t\t\t);\n\t\t\t\tbuttonText = __( 'View all Reviews', 'woocommerce-admin' );\n\t\t\t\tcontent = (\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t/* eslint-disable max-len */\n\t\t\t\t\t\t\t\"Awesome, you've moderated all of your product reviews. How about responding to some of those negative reviews?\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t/* eslint-enable */\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tbuttonUrl =\n\t\t\t\t'https://woocommerce.com/posts/reviews-woocommerce-best-practices/';\n\t\t\tbuttonTarget = '_blank';\n\t\t\tbuttonText = __( 'Learn more', 'woocommerce-admin' );\n\t\t\tcontent = (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\"Your customers haven't started reviewing your products.\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Take some time to learn about best practices for collecting and using your reviews.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<ActivityCard\n\t\t\t\tclassName=\"woocommerce-empty-activity-card\"\n\t\t\t\ttitle={ title }\n\t\t\t\ticon={ <Gridicon icon=\"time\" size={ 48 } /> }\n\t\t\t\tactions={\n\t\t\t\t\t<Button\n\t\t\t\t\t\thref={ buttonUrl }\n\t\t\t\t\t\ttarget={ buttonTarget }\n\t\t\t\t\t\tisDefault\n\t\t\t\t\t>\n\t\t\t\t\t\t{ buttonText }\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ content }\n\t\t\t</ActivityCard>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { isError, isRequesting, reviews } = this.props;\n\n\t\tif ( isError ) {\n\t\t\tconst title = __(\n\t\t\t\t'There was an error getting your reviews. Please try again.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tconst actionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\t\tconst actionCallback = () => {\n\t\t\t\twindow.location.reload();\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<EmptyContent\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\t\tactionURL={ null }\n\t\t\t\t\t\tactionCallback={ actionCallback }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\tconst title =\n\t\t\tisRequesting || reviews.length\n\t\t\t\t? __( 'Reviews', 'woocommerce-admin' )\n\t\t\t\t: __( 'No reviews to moderate', 'woocommerce-admin' );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ActivityHeader title={ title } />\n\t\t\t\t<Section>\n\t\t\t\t\t{ isRequesting ? (\n\t\t\t\t\t\t<ActivityCardPlaceholder\n\t\t\t\t\t\t\tclassName=\"woocommerce-review-activity-card\"\n\t\t\t\t\t\t\thasAction\n\t\t\t\t\t\t\thasDate\n\t\t\t\t\t\t\tlines={ 2 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t{ reviews.length\n\t\t\t\t\t\t\t\t? reviews.map( ( review ) =>\n\t\t\t\t\t\t\t\t\t\tthis.renderReview( review, this.props )\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: this.renderEmptyMessage() }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t</Section>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nReviewsPanel.propTypes = {\n\treviews: PropTypes.array.isRequired,\n\tisError: PropTypes.bool,\n\tisRequesting: PropTypes.bool,\n};\n\nReviewsPanel.defaultProps = {\n\treviews: [],\n\tisError: false,\n\tisRequesting: false,\n};\n\nexport default withSelect( ( select, props ) => {\n\tconst { hasUnapprovedReviews } = props;\n\tconst { getReviews, getReviewsError, isGetReviewsRequesting } = select(\n\t\t'wc-api'\n\t);\n\tlet reviews = [];\n\tlet isError = false;\n\tlet isRequesting = false;\n\tlet lastApprovedReviewTime = null;\n\tif ( hasUnapprovedReviews ) {\n\t\tconst reviewsQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: QUERY_DEFAULTS.pageSize,\n\t\t\tstatus: 'hold',\n\t\t\t_embed: 1,\n\t\t};\n\t\treviews = getReviews( reviewsQuery );\n\t\tisError = Boolean( getReviewsError( reviewsQuery ) );\n\t\tisRequesting = isGetReviewsRequesting( reviewsQuery );\n\t} else {\n\t\tconst approvedReviewsQuery = {\n\t\t\tpage: 1,\n\t\t\tper_page: 1,\n\t\t\tstatus: 'approved',\n\t\t\t_embed: 1,\n\t\t};\n\t\tconst approvedReviews = getReviews( approvedReviewsQuery );\n\t\tif ( approvedReviews.length ) {\n\t\t\tconst lastApprovedReview = approvedReviews[ 0 ];\n\t\t\tif ( lastApprovedReview.date_created_gmt ) {\n\t\t\t\tconst creationDate = new Date(\n\t\t\t\t\tlastApprovedReview.date_created_gmt\n\t\t\t\t);\n\t\t\t\tlastApprovedReviewTime = creationDate.getTime();\n\t\t\t}\n\t\t}\n\n\t\tisError = Boolean( getReviewsError( approvedReviewsQuery ) );\n\t\tisRequesting = isGetReviewsRequesting( approvedReviewsQuery );\n\t}\n\n\treturn {\n\t\treviews,\n\t\tisError,\n\t\tisRequesting,\n\t\tlastApprovedReviewTime,\n\t};\n} )( ReviewsPanel );\n","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}